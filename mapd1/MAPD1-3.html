<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bomba-Relógio — 50 minutos</title>
<style>
  :root{
    --bg:#0b0f16; --accent:#ff3b3b; --accent2:#19d17f; --text:#e6eefc; --muted:#8ea2c0; --warn:#ffb020; --glass:#0b1422c0;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    background:
      radial-gradient(1200px 800px at 70% -10%, #1a2235, var(--bg)),
      radial-gradient(600px 400px at 20% 120%, #0c1220 10%, transparent 60%) no-repeat;
    color:var(--text);
    font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial;
    user-select:none; -webkit-user-select:none; -ms-user-select:none;
    overflow:hidden;
  }
  .wrap{max-width:1100px;margin:0 auto;padding:24px;height:100%;
        display:grid;grid-template-rows:auto 1fr auto;gap:16px}

  /* Header / Footer */
  header, footer{
    position:relative; border-radius:16px; padding:12px 16px;
    display:flex; align-items:center; justify-content:space-between; gap:16px;
    border:1px solid rgba(255,255,255,.10);
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    backdrop-filter: blur(6px);
  }
  .title{display:flex; gap:12px; align-items:center; font-weight:800; letter-spacing:.4px}
  .led{width:12px;height:12px;border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #ffa0a0, var(--accent));
    box-shadow: 0 0 16px var(--accent), 0 0 32px rgba(255,59,59,.5);
    animation: blink 1s infinite;
  }
  @keyframes blink{0%,65%{opacity:1}66%,100%{opacity:.35}}
  .status-line{display:flex; gap:14px; align-items:center; color:var(--muted); font-size:14px}
  .pill{padding:4px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04)}
  .progress{height:10px;border-radius:999px;background:rgba(255,255,255,.06);overflow:hidden;border:1px solid rgba(255,255,255,.1)}
  .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent2),#22b3ff);transition:width .25s}

  /* Main layout: 2 colunas — Timer • Perguntas */
  .main{
    position:relative; overflow:auto;
    border-radius:22px; padding:clamp(16px,3vw,28px);
    display:grid; grid-template-columns: 360px 1fr; gap:24px;
    background:
      radial-gradient(800px 600px at 80% -30%, rgba(255,255,255,.06), transparent 40%),
      linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
    border:1px solid rgba(255,255,255,.10);
    max-height: calc(100vh - 160px);
  }
  @media (max-width: 900px){ .main{ grid-template-columns: 1fr; } }

  /* TIMER (anel hi-tech) */
  .timerBox{
    position:relative; border-radius:18px; padding:18px; display:grid; gap:16px;
    border:1px solid rgba(255,255,255,.12);
    background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    align-content:start;
  }
  .dial{
    position:relative; width:100%; aspect-ratio:1/1; border-radius:50%;
    background:
      conic-gradient(var(--accent2) calc(var(--p,100)*1%), rgba(255,255,255,.10) 0),
      radial-gradient(circle at 50% 50%, rgba(255,255,255,.15), rgba(0,0,0,.65) 70%, transparent 72%);
    box-shadow: inset 0 0 50px rgba(0,0,0,.6), 0 14px 40px rgba(0,0,0,.4), inset 0 0 2px rgba(255,255,255,.25);
  }
  .dial::before{
    content:""; position:absolute; inset:22px; border-radius:50%;
    background: conic-gradient(from 0deg, #9aa2ad, #d7dde6, #6f7784, #9aa2ad, #d7dde6, #6f7784, #9aa2ad);
    box-shadow: inset 0 2px 6px rgba(255,255,255,.35), inset 0 -2px 10px rgba(0,0,0,.6);
    filter: saturate(120%);
  }
  .glass{
    position:absolute; inset:64px; border-radius:16px;
    background:
      radial-gradient(200px 100px at 30% 0%, rgba(255,255,255,.18), transparent 60%),
      linear-gradient(180deg, var(--glass), rgba(4,8,14,.82));
    border:1px solid rgba(255,255,255,.15);
    display:grid; place-items:center;
  }
  .digits{
    font-family: "Segoe UI","Consolas",monospace;
    font-weight:900; font-size: clamp(36px, 6vw, 56px); letter-spacing:.08em; color:#bfffe0;
    text-shadow: 0 0 10px rgba(25,209,127,.7), 0 0 22px rgba(34,179,255,.3), 0 0 46px rgba(25,209,127,.45);
  }
  .warnGlow{ box-shadow: 0 0 0 3px rgba(255,176,32,.25), inset 0 0 16px rgba(255,176,32,.25) !important; }

  /* Perguntas */
  .qbox{
    background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
    border:1px solid rgba(255,255,255,.10); border-radius:18px; padding:18px;
    display:grid; gap:12px; align-content:start;
  }
  .qhead{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
  .question{ font-size: clamp(18px,2.2vw,24px); line-height:1.35; font-weight:800; flex:1; }
  .options{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:6px }
  .btn{
    --bg:#151d2a;
    border:1px solid rgba(255,255,255,.12);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.01)), var(--bg);
    padding:14px 16px; border-radius:12px; color:var(--text); text-align:left; cursor:pointer;
    transition: transform .08s, border-color .12s, box-shadow .12s, background .12s;
    font-weight:700; box-shadow: 0 3px 10px rgba(0,0,0,.25);
  }
  .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.25) }
  .btn.correct{ background: linear-gradient(180deg, rgba(25,209,127,.18), rgba(25,209,127,.06)); border-color: rgba(25,209,127,.55) }
  .btn.wrong{   background: linear-gradient(180deg, rgba(255,59,59,.18), rgba(255,59,59,.06));   border-color: rgba(255,59,59,.55) }
  .feedback{min-height:40px; font-size:14px; color:var(--muted); line-height:1.35}
  .feedback.good{color:var(--accent2)} .feedback.bad{color:var(--accent)} .feedback.warn{color:var(--warn)}

  /* Overlays */
  .overlay{position:absolute; inset:0; background:rgba(0,0,0,.75); display:none; align-items:center; justify-content:center; text-align:center; padding:24px; z-index:12}
  .card{background:#111924; border:1px solid rgba(255,255,255,.12); border-radius:18px; padding:24px; max-width:680px; margin:0 auto; box-shadow:0 14px 40px rgba(0,0,0,.45)}
  .card h2{margin:0 0 8px}.card p{margin:6px 0 18px; color:var(--muted)} .row{display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
  .primary{background:var(--accent2); color:#062a1c; border:none; padding:12px 16px; border-radius:12px; cursor:pointer; font-weight:900}
  .ghost{background:transparent; color:#fff; border:1px solid rgba(255,255,255,.2); padding:12px 16px; border-radius:12px; cursor:pointer; font-weight:800}

  /* Explosão (tela.jpg) */
  .flash{position:fixed; inset:0; background:#fff; z-index:999; display:none}
  .crackimg{
    position:fixed; inset:0; z-index:999; display:none; /* inicia oculta */
    background: #000 url('tela.jpg') center/cover no-repeat;
    align-items:center; justify-content:center;
  }
  .crackimg::after{
    content:""; position:absolute; inset:0;
    background: radial-gradient(circle at center, rgba(0,0,0,0) 0%, rgba(0,0,0,.35) 55%, rgba(0,0,0,.75) 100%);
    pointer-events:none;
  }
  .crackimg .stack{ position:relative; display:flex; flex-direction:column; align-items:center; gap:14px; z-index:2 }
  .crackimg .boom-title{ color:#f1f1f1; font-size: clamp(28px,6vw,60px); letter-spacing:2px; font-weight:900; margin:0; text-shadow: 0 0 14px rgba(255,255,255,.5), 0 0 30px rgba(255,59,59,.45) }
  .crackimg .restart{
    display:none; background: var(--accent); color:#190202; border:none; padding:12px 18px; border-radius:12px; cursor:pointer; font-weight:900;
    box-shadow: 0 8px 24px rgba(255,59,59,.35);
  }

  .shake{animation:shake .18s ease 0s 2}
  @keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)}}
  ::selection{background:transparent}
  button:focus-visible{outline:2px solid #22b3ff; outline-offset:3px}
</style>
</head>
<body>
<div class="wrap" id="app">

  <header>
    <div class="title"><div class="led" id="led"></div><div>Dispositivo • Série MX-9</div></div>
    <div class="status-line">
      <div class="pill">Pergunta: <span id="qidx">1</span>/<span id="qtotal">—</span></div>
      <div class="pill">Tentativas: <span id="tries">2</span>/2</div>
      <div class="pill">Progresso
        <div class="progress" style="width:170px;display:inline-block;vertical-align:middle;margin-left:8px">
          <div class="bar" id="bar"></div>
        </div>
      </div>
    </div>
  </header>

  <div class="main" id="main">
    <!-- COLUNA ESQUERDA: SÓ O TIMER -->
    <div class="timerBox">
      <div style="font-weight:800;letter-spacing:.4px;color:var(--muted)">TIMER (50 min)</div>
      <div class="dial" id="dial">
        <div class="glass"><div class="digits" id="digits">50:00</div></div>
      </div>
      <div class="pill" style="justify-self:start">Cronômetro global</div>
    </div>

    <!-- COLUNA DIREITA: PERGUNTAS -->
    <div class="qbox">
      <div class="qhead">
        <div class="question" id="question">Clique em “Iniciar” para começar.</div>
      </div>
      <div class="options" id="options"></div>
      <div class="feedback" id="feedback">&nbsp;</div>
    </div>

    <!-- OVERLAY INICIAL -->
    <div class="overlay" id="entryOverlay" role="dialog" aria-modal="true" style="grid-column:1/-1">
      <div class="card">
        <h2>Protocolo de Desarmamento</h2>
        <p>Responda todas as perguntas. Avança só quando <strong>acertar</strong>. Dois erros na mesma pergunta = <strong>BOOM</strong>. Tempo total: <strong>50 minutos</strong>.</p>
        <div class="row"><button class="primary" id="startBtn">Iniciar</button></div>
        <p style="font-size:12px;color:var(--muted);margin-top:10px">Texto não selecionável • Atalhos/Print bloqueados (melhor esforço)</p>
      </div>
    </div>

    <!-- SUCESSO -->
    <div class="overlay" id="defused" style="z-index:20">
      <div class="card" style="background:#0e1a14;border-color:rgba(25,209,127,.45)">
        <h2 style="margin:0;font-size:clamp(28px,6vw,60px);color:var(--accent2);text-shadow:0 0 22px rgba(25,209,127,.6)">DISPOSITIVO DESARMADO</h2>
        <p class="reason">Excelente trabalho! Todas as respostas corretas a tempo.</p>
        <div class="row"><button class="primary" id="againBtn">Jogar de novo</button></div>
      </div>
    </div>
  </div>

  <footer>
    <div style="color:var(--muted);font-size:13px">Timer + perguntas • Anti-cola ativo</div>
    <div><button class="ghost" id="fsToggle">Tela cheia (opcional)</button></div>
  </footer>
</div>

<!-- OVERLAYS DE EXPLOSÃO -->
<div class="flash" id="flash"></div>
<div class="crackimg" id="crackimg">
  <div class="stack">
    <h1 class="boom-title">BOOM</h1>
    <button class="restart" id="restartBtn">Reiniciar</button>
  </div>
</div>

<script>
/* ===== CONFIG ===== */
const CONFIG = { requireFullscreen:false, explodeOnBlur:false, strictShortcuts:true };

/* ===== PERGUNTAS (as suas) =====
   Estrutura: { q, options: [...], a: indexCorreto, why: [justif A, justif B, ...] }
*/
const QUESTIONS = [
  {
    q:`1. Qual é a função fisiológica primária e benéfica do sistema imune?`,
    options:[
      `(A) Manter a homeostase da temperatura corporal através da febre.`,
      `(B) [cite_start]Defender o organismo contra microrganismos infecciosos e eliminar substâncias estranhas[cite: 703, 704].`,
      `(C) Regular o crescimento e a diferenciação de todos os tecidos do corpo.`,
      `(D) Exclusivamente reparar tecidos danificados após uma lesão.`
    ],
    a:1,
    why:[
      `**(A) Incorreta.** A febre é um *efeito sistêmico* da resposta imune (uma consequência), não sua função primária.`,
      `[cite_start]**(B) Correta.** A função fisiológica central do sistema imune é a defesa contra patógenos[cite: 704]. A eliminação de substâncias estranhas e células danificadas são funções correlatas.`,
      `**(C) Incorreta.** Embora citocinas possam influenciar o crescimento celular, a regulação geral do desenvolvimento dos tecidos não é a função primária do sistema imune.`,
      `**(D) Incorreta.** O reparo tecidual é consequência da inflamação; a função principal do sistema imune é a defesa, que precede o reparo.`
    ]
  },
  {
    q:`2. A existência de doenças como alergias e lúpus, onde o sistema imune causa dano ao hospedeiro, demonstra que:`,
    options:[
      `(A) O sistema imune pode falhar em sua função de defesa e se tornar inerentemente patológico.`,
      `(B) [cite_start]Os mecanismos efetores da resposta imune são os mesmos que normalmente protegem o corpo, mas estão desregulados, mal direcionados ou excessivamente ativos[cite: 706, 707].`,
      `(C) A imunidade adaptativa é sempre prejudicial, enquanto a imunidade inata é sempre protetora.`,
      `(D) Patógenos específicos podem reprogramar permanentemente o sistema imune para atacar o próprio corpo.`
    ],
    a:1,
    why:[
      `**(A) Incorreta.** Não é uma “falha” de potência, e sim de regulação e alvo da resposta.`,
      `**(B) Correta.** [cite_start]A inflamação que combate bactérias é mecanicamente similar à que ataca uma articulação na artrite reumatoide[cite: 706].`,
      `**(C) Incorreta.** Tanto inata quanto adaptativa podem causar doença quando desreguladas.`,
      `**(D) Incorreta.** Infecções podem ser gatilhos, mas a base é falha de autotolerância, não “reprogramação permanente”.`
    ]
  },
  {
    q:`3. Quando um patógeno entra no corpo, qual sistema imune inicia a resposta defensiva nas primeiras horas?`,
    options:[
      `(A) O sistema adaptativo, através da rápida produção de anticorpos.`,
      `(B) [cite_start]O sistema inato, que utiliza mecanismos pré-existentes para uma defesa imediata[cite: 733, 734].`,
      `(C) Ambos os sistemas respondem simultaneamente e com a mesma velocidade.`,
      `(D) O sistema humoral, que libera complemento para neutralizar o patógeno instantaneamente.`
    ],
    a:1,
    why:[
      `[cite_start]**(A) Incorreta.** A resposta adaptativa, incluindo anticorpos, leva dias[cite: 759].`,
      `[cite_start]**(B) Correta.** A inata responde em horas, pois seus componentes já estão prontos[cite: 733, 758].`,
      `[cite_start]**(C) Incorreta.** Inata precede adaptativa (horas vs. dias)[cite: 732].`,
      `**(D) Incorreta.** Complemento integra a inata, mas não é “instantâneo” e não é o único componente.`
    ]
  },
  {
    q:`4. A principal diferença no modo como a imunidade inata e a adaptativa "enxergam" um patógeno é:`,
    options:[
      `(A) [cite_start]A inata detecta PAMPs (estruturas compartilhadas), e a adaptativa reconhece antígenos específicos[cite: 765, 791, 2488, 2490].`,
      `(B) A inata usa MHC, e a adaptativa usa TLRs.`,
      `(C) A inata só reconhece bactérias; a adaptativa reconhece vírus e fungos.`,
      `(D) A inata é ativada por DAMPs, e a adaptativa por PAMPs.`
    ],
    a:0,
    why:[
      `**(A) Correta.** [cite_start]A inata reconhece assinaturas de classes microbianas; a adaptativa distingue detalhes finos[cite: 765, 2488].`,
      `**(B) Incorreta.** MHC é da apresentação para T (adaptativa); TLRs são canônicos da inata.`,
      `**(C) Incorreta.** Ambos reconhecem vários tipos de patógenos.`,
      `**(D) Incorreta.** Inata responde a PAMPs e DAMPs; adaptativa é ativada por antígenos.`
    ]
  },
  {
    q:`5. O que melhor define o conceito de "memória imunológica"?`,
    options:[
      `(A) A capacidade do sistema inato de intensificar-se em qualquer nova infecção.`,
      `(B) [cite_start]Propriedade do sistema adaptativo de responder mais rápido e melhor na reexposição ao mesmo antígeno[cite: 822, 1093].`,
      `(C) Inflamação crônica de baixo grau após infecção.`,
      `(D) Presença constante de anticorpos no sangue como única forma de memória.`
    ],
    a:1,
    why:[
      `**(A) Incorreta.** Inata clássica não possui memória.`,
      `**(B) Correta.** [cite_start]Linfócitos B/T de memória permitem resposta mais rápida e eficaz[cite: 822, 824].`,
      `**(C) Incorreta.** Inflamação crônica é patológica, não “memória”.`,
      `**(D) Incorreta.** Anticorpos são parte; memória celular é crucial.`
    ]
  },
  {
    q:`6. Por que é vantajoso possuir tanto imunidade inata quanto adaptativa?`,
    options:[
      `(A) Porque são redundantes e equivalentes.`,
      `(B) [cite_start]Porque a inata contém inicialmente e instrui a adaptativa, que erradica a infecção[cite: 771, 2790].`,
      `(C) Porque a inata cuida só de barreiras e a adaptativa só de órgãos internos.`,
      `(D) Porque a inata combate bactérias e a adaptativa combate vírus.`
    ],
    a:1,
    why:[
      `**(A) Incorreta.** Elas são complementares, não redundantes.`,
      `**(B) Correta.** [cite_start]A inata sinaliza e molda a adaptativa, além de conter a infecção no início[cite: 2790].`,
      `**(C) Incorreta.** Ambas atuam em todo o corpo.`,
      `**(D) Incorreta.** Falsa dicotomia.`
    ]
  },
  {
    q:`7. Em apendicite aguda, que célula domina o infiltrado inicial?`,
    options:[
      `(A) Plasmócitos.`,
      `(B) Linfócitos T CD4+.`,
      `(C) Mastócitos.`,
      `(D) [cite_start]Neutrófilos, principal célula da inflamação aguda[cite: 1179, 2707].`
    ],
    a:3,
    why:[
      `**(A) e (B) Incorretas.** Adaptativas predominam mais tarde/crônico.`,
      ``, /* B justification included above */
      `**(C) Incorreta.** Mastócitos iniciam eventos vasculares, mas não dominam o infiltrado sanguíneo.`,
      `**(D) Correta.** Neutrófilos migram rápido e marcam inflamação aguda.`
    ]
  },
  {
    q:`8. Função exclusiva da Célula Dendrítica (ponte inata–adaptativa):`,
    options:[
      `(A) Fagocitar e apresentar antígenos via MHC II.`,
      `(B) [cite_start]Ativar linfócitos T *naive* para iniciar resposta adaptativa primária[cite: 1323, 2073].`,
      `(C) Produzir TNF e IL-1.`,
      `(D) Reconhecer PAMPs por TLRs.`
    ],
    a:1,
    why:[
      `**(A) Incorreta.** Macrófagos e B também apresentam, com outros objetivos.`,
      `**(B) Correta.** [cite_start]DCs são únicas em ativar T *naive* de forma eficiente[cite: 2073].`,
      `**(C) Incorreta.** Várias células fazem isso.`,
      `**(D) Incorreta.** TLRs não são exclusivos de DCs.`
    ]
  },
  {
    q:`9. Propósito biológico fundamental da inflamação:`,
    options:[
      `(A) Causar dor para alertar o indivíduo.`,
      `(B) [cite_start]Levar leucócitos e proteínas plasmáticas ao local para eliminar o agente e iniciar reparo[cite: 2477, 2705].`,
      `(C) Aumentar a temperatura local para destruir patógenos.`,
      `(D) Formar cicatriz fibrótica para isolar a área.`
    ],
    a:1,
    why:[
      `**(A) Incorreta.** Dor é sintoma/efeito colateral útil, não propósito.`,
      `**(B) Correta.** [cite_start]É um processo de entrega de defesas ao foco[cite: 2705, 2706].`,
      `**(C) Incorreta.** Calor vem da vasodilatação, não “cozimento” de patógenos.`,
      `**(D) Incorreta.** Cicatriz pode ser desfecho crônico, não objetivo inicial.`
    ]
  },
  {
    q:`10. O que são PAMPs?`,
    options:[
      `(A) Moléculas únicas por cepa, da adaptativa.`,
      `(B) Toxinas bacterianas que matam células do hospedeiro.`,
      `(C) [cite_start]Estruturas conservadas em micróbios (ex: LPS, peptidoglicano), reconhecidas pela inata[cite: 2490, 2493].`,
      `(D) Moléculas do hospedeiro liberadas no dano celular.`
    ],
    a:2,
    why:[
      `**(A) Incorreta.** Isso descreve antígeno/epítopo (adaptativa).`,
      `**(B) Incorreta.** PAMPs são componentes estruturais, não apenas toxinas.`,
      `[cite_start]**(C) Correta.** Origem microbiana e conservação permitem poucos receptores reconhecerem muitos alvos[cite: 2490].`,
      `**(D) Incorreta.** Isso descreve DAMPs.`
    ]
  },
  {
    q:`11. Queimadura solar grave sem infecção: o que ativa a inata?`,
    options:[
      `(A) PAMPs liberados pela radiação UV.`,
      `(B) [cite_start]DAMPs (ATP, DNA) liberados por células danificadas[cite: 2498, 2537].`,
      `(C) Autoanticorpos pré-existentes.`,
      `(D) Ativação direta do complemento pela luz solar.`
    ],
    a:1,
    why:[
      `**(A) Incorreta.** PAMPs vêm de patógenos; UV não libera PAMP.`,
      `**(B) Correta.** Inflamação estéril é iniciada por DAMPs de dano celular.`,
      `**(C) Incorreta.** Não é mecanismo típico de queimadura solar.`,
      `**(D) Incorreta.** Complemento não é ativado diretamente por luz solar.`
    ]
  },
  {
    q:`12. Duas citocinas chave para iniciar/amplificar inflamação aguda no endotélio:`,
    options:[
      `(A) IL-10 e TGF-β.`,
      `(B) IFN-γ e IL-4.`,
      `(C) [cite_start]TNF e IL-1[cite: 2710, 2725, 2737].`,
      `(D) IL-12 e IL-23.`
    ],
    a:2,
    why:[
      `**(A) Incorreta.** Anti-inflamatórias/regulatórias.`,
      `**(B) Incorreta.** Associadas a polarização Th; fases posteriores.`,
      `**(C) Correta.** [cite_start]Produzidas precocemente e ativam endotélio + efeitos sistêmicos[cite: 2710, 2716].`,
      `**(D) Incorreta.** Importantes para diferenciação T (Th1/Th17), não iniciadoras vasculares primárias.`
    ]
  },
  {
    q:`13. Sequência correta da migração de neutrófilo do sangue para o tecido:`,
    options:[
      `(A) Adesão estável → Rolamento → Transmigração → Quimiotaxia.`,
      `(B) [cite_start]Rolamento → Ativação de integrinas por quimiocinas → Adesão estável → Transmigração[cite: 2171, 2315, 2328, 2329, 2330].`,
      `(C) Quimiotaxia → Transmigração → Rolamento → Adesão estável.`,
      `(D) Ativação de integrinas → Quimiotaxia → Rolamento → Adesão estável.`
    ],
    a:1,
    why:[
      `**(A) Incorreta.** Ordem invertida.`,
      `**(B) Correta.** [cite_start]Rolamento (selectinas) → integrinas ativadas → adesão firme → transmigração[cite: 2315, 2328, 2330].`,
      `**(C) Incorreta.** Coloca quimiotaxia antes do extravasamento.`,
      `**(D) Incorreta.** Rolamento deve vir antes da adesão firme.`
    ]
  },
  {
    q:`14. Principal função do inflamassoma NLRP3:`,
    options:[
      `(A) Reconhecer PAMPs na superfície e secretar interferons.`,
      `(B) Ligar-se diretamente a bactérias e ativar complemento.`,
      `(C) [cite_start]Detectar PAMPs/DAMPs no citosol → ativar Caspase-1 → IL-1β madura[cite: 2558, 2584, 2586, 2594].`,
      `(D) Promover maturação de linfócitos T no timo.`
    ],
    a:2,
    why:[
      `**(A) Incorreta.** Superfície/IFNs ≈ TLRs/RLRs, não inflamassoma (citosólico).`,
      `**(B) Incorreta.** Descreve vias de MBL/anticorpos, não NLRP3.`,
      `**(C) Correta.** [cite_start]Ativação gera IL-1β/IL-18 via Caspase-1[cite: 2584, 2597].`,
      `**(D) Incorreta.** Timo ≠ inflamassoma.`
    ]
  }
];

/* ===== PARÂMETROS ===== */
const TOTAL_TIME = 50*60; // 50 minutos
const WARN_THRESHOLD = 60; // avisa com 1 min restante

/* ===== ESTADO ===== */
let idx=0, wrong=0, timeLeft=TOTAL_TIME;
let ticking=null, started=false, exploded=false, defused=false;

/* ===== ELEMENTOS ===== */
const qEl=document.getElementById('question');
const optsEl=document.getElementById('options');
const fbEl=document.getElementById('feedback');
const triesEl=document.getElementById('tries');
const qidxEl=document.getElementById('qidx');
const qtotalEl=document.getElementById('qtotal');
const barEl=document.getElementById('bar');

const dialEl=document.getElementById('dial');
const digitsEl=document.getElementById('digits');
const led=document.getElementById('led');

const entryOverlay=document.getElementById('entryOverlay');
const startBtn=document.getElementById('startBtn');
const defusedOverlay=document.getElementById('defused');
const againBtn=document.getElementById('againBtn');

const fsToggle=document.getElementById('fsToggle');
const flashEl=document.getElementById('flash');
const crackImgEl=document.getElementById('crackimg');
const restartBtn=document.getElementById('restartBtn');

/* ===== UTILS ===== */
const fmt=(s)=> s.toString().padStart(2,'0');
function setTimer(t){
  const m=Math.floor(t/60), s=t%60, txt=`${fmt(m)}:${fmt(s)}`;
  digitsEl.textContent=txt;
  const pct=Math.max(0,Math.min(100,(t/TOTAL_TIME)*100));
  dialEl.style.setProperty('--p', pct);
  if (t<=WARN_THRESHOLD) dialEl.classList.add('warnGlow'); else dialEl.classList.remove('warnGlow');
}
function setProgress(){
  qidxEl.textContent=(idx+1);
  triesEl.textContent=(2-wrong);
  barEl.style.width=(idx/QUESTIONS.length)*100 + '%';
}
function renderQuestion(){
  const {q, options}=QUESTIONS[idx];
  qEl.textContent=q;
  optsEl.innerHTML='';
  options.forEach((op,i)=>{
    const b=document.createElement('button');
    b.className='btn'; b.textContent=op;
    b.onclick=()=> choose(i,b);
    optsEl.appendChild(b);
  });
  fbEl.innerHTML='Escolha a alternativa correta.';
  fbEl.className='feedback';
  setProgress();
}
function disableOptions(){ [...optsEl.children].forEach(b=>b.disabled=true); }
function enableOptionsExcept(ex){ [...optsEl.children].forEach(b=>{ if(b!==ex) b.disabled=false; }); }

/* ===== LÓGICA ===== */
function choose(i,btn){
  if (exploded||defused) return;
  const correct=QUESTIONS[idx].a;
  disableOptions();

  if (i===correct){
    btn.classList.add('correct');
    fbEl.innerHTML='✔ Resposta correta!'; fbEl.classList.add('good');
    setTimeout(next,420);
  } else {
    wrong++; btn.classList.add('wrong');
    document.getElementById('main').classList.add('shake'); setTimeout(()=>document.getElementById('main').classList.remove('shake'),250);
    const left=2-wrong;

    // Mostrar justificativa da alternativa clicada (SEM revelar a correta)
    const why = QUESTIONS[idx].why?.[i] ?? 'Resposta incorreta.';
    fbEl.innerHTML = why; fbEl.classList.add('bad');

    if (left<=0) explode('Erros máximos nesta pergunta (2).');
    else enableOptionsExcept(btn);
  }
}
function next(){
  idx++; wrong=0;
  if (idx>=QUESTIONS.length) return defuse();
  renderQuestion();
}
function tick(){
  if (exploded||defused) return;
  timeLeft--; setTimer(timeLeft);
  if (timeLeft<=0) explode('Tempo esgotado.');
}
function start(){
  if (started) return; started=true;
  entryOverlay.style.display='none';
  setTimer(timeLeft);
  renderQuestion();
  ticking=setInterval(tick,1000);
}

/* ===== EXPLOSÃO ===== */
function explode(_reason){
  if (exploded||defused) return; exploded=true;
  clearInterval(ticking);
  // 1) flash branco (2s)
  flashEl.style.display='block';
  // 2) tela rachada (tela.jpg) por 2s sem botão
  setTimeout(()=>{ flashEl.style.display='none'; crackImgEl.style.display='flex'; },2000);
  // 3) depois mais 2s, botão Reiniciar
  setTimeout(()=>{ restartBtn.style.display='inline-block'; },4000);
}

/* ===== SUCESSO ===== */
function defuse(){
  if (exploded||defused) return; defused=true;
  clearInterval(ticking);
  barEl.style.width='100%';
  led.style.background='radial-gradient(circle at 30% 30%, #bfffe0, var(--accent2))';
  defusedOverlay.style.display='flex';
}

/* ===== REINICIAR ===== */
function restartGame(){
  clearInterval(ticking);
  idx=0; wrong=0; timeLeft=TOTAL_TIME; started=false; exploded=false; defused=false;
  crackImgEl.style.display='none'; restartBtn.style.display='none'; flashEl.style.display='none';
  defusedOverlay.style.display='none';
  led.style.background='radial-gradient(circle at 30% 30%, #ffa0a0, var(--accent))';
  barEl.style.width='0%';
  setTimer(timeLeft); setProgress();
  start();
}

/* ===== FULLSCREEN opcional ===== */
async function enterFullscreen(){
  const el=document.documentElement;
  if (el.requestFullscreen) await el.requestFullscreen();
  else if (el.webkitRequestFullscreen) await el.webkitRequestFullscreen();
  else if (el.msRequestFullscreen) await el.msRequestFullscreen();
}
async function maybeFullscreenAndStart(){
  try{ if (CONFIG.requireFullscreen) await enterFullscreen(); }catch(e){}
  start();
}
fsToggle.onclick=async ()=>{ try{ await enterFullscreen(); }catch(e){} };

/* ===== Anti-cola (melhor esforço) ===== */
window.addEventListener('contextmenu', e=> e.preventDefault());
['copy','cut','paste','dragstart'].forEach(evt=> window.addEventListener(evt, e=> e.preventDefault()));
if (CONFIG.strictShortcuts){
  window.addEventListener('keydown',(e)=>{
    const k=e.key.toLowerCase(), ctrl=e.ctrlKey||e.metaKey;
    if (k==='printscreen' || e.keyCode===44){ e.preventDefault(); try{ navigator.clipboard.writeText(''); }catch(_){}
      explode('Tentativa de Print Screen detectada.'); return; }
    if ((ctrl&&(k==='c'||k==='x'||k==='v'||k==='s'||k==='p'||k==='u')) || (ctrl&&e.shiftKey&&(k==='i'||k==='c'||k==='j')) || k==='f12'){
      e.preventDefault(); explode('Atalho bloqueado.'); return;
    }
  },{capture:true});
}
// opcional: explodir ao sair da aba
// window.addEventListener('blur',()=>{ if(started&&!exploded&&!defused) explode('Aba perdeu foco.'); });
// document.addEventListener('visibilitychange',()=>{ if(document.visibilityState!=='visible'&&started&&!exploded&&!defused) explode('Aba oculta.'); });
window.addEventListener('beforeprint',(e)=>{ e.preventDefault(); setTimeout(()=> explode('Tentativa de imprimir.'),0); });

/* ===== Inicialização ===== */
document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('entryOverlay').style.display='flex';
  document.getElementById('startBtn').onclick=maybeFullscreenAndStart;
  document.getElementById('againBtn').onclick=restartGame;
  document.getElementById('restartBtn').addEventListener('click', restartGame);
  qtotalEl.textContent = QUESTIONS.length.toString();
  setTimer(timeLeft); setProgress();
});
</script>
</body>
</html>
