<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAPDFLIX | Aula 1: Les√µes e Adapta√ß√µes Celulares</title>
    
    <!-- FONTES DO GOOGLE -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- BIBLIOTECAS DE √çCONES E SOM -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    
    <style>
        /* --- VARI√ÅVEIS DE ESTILO E RESET --- */
        :root {
            --cor-netflix-vermelho: #E50914;
            --cor-netflix-vermelho-escuro: #B00710;
            --cor-netflix-preto: #141414;
            --cor-netflix-cinza-escuro: #222;
            --cor-netflix-cinza-medio: #333;
            --cor-netflix-cinza-claro: #e5e5e5;
            --cor-texto-principal: #ffffff;
            --cor-texto-secundario: #a0a0a0;
            --cor-sucesso: #28a745;
            --cor-erro: #dc3545;
            
            --fonte-titulo: 'Bebas Neue', sans-serif;
            --fonte-texto: 'Roboto', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html { scroll-behavior: smooth; }

        body {
            background-color: var(--cor-netflix-preto);
            color: var(--cor-texto-principal);
            font-family: var(--fonte-texto);
            overflow-x: hidden;
            overflow-y: hidden; /* Prevenir scroll durante splash */
        }

        /* --- TELAS DE SPLASH --- */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200;
            cursor: pointer;
            transition: opacity 0.5s ease-out;
        }
        
        #splash-logo-view .splash-logo {
            font-family: var(--fonte-titulo);
            font-size: 6rem;
            color: var(--cor-netflix-vermelho);
            letter-spacing: 4px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
        }

        .splash-m-img {
            width: 40vw;
            max-width: 250px;
            height: auto;
            opacity: 0;
            transform: scale(0.8);
            object-fit: contain;
        }

        .splash-m-img.animate {
            animation: tudum-animation 1.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
        }

        @keyframes tudum-animation {
            0% { transform: scale(0.8); opacity: 0; }
            40% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* --- ESTRUTURA PRINCIPAL --- */
        #app-container {
            width: 100%;
            min-height: 100vh;
            display: none; /* Inicia oculto */
        }

        .view {
            width: 100%;
            min-height: 100vh;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.5s ease-in-out;
        }

        .view.active { display: flex; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* --- TELA DE NAVEGA√á√ÉO (CAT√ÅLOGO) --- */
        #browse-view header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px 50px;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(180deg, rgba(20, 20, 20, 0.8) 0%, rgba(20, 20, 20, 0) 100%);
            transition: background-color 0.3s ease;
        }
        #browse-view header.scrolled { background-color: var(--cor-netflix-preto); }
        
        .header-left { display: flex; align-items: center; gap: 25px; }

        .logo {
            font-family: var(--fonte-titulo);
            font-size: 2.5rem;
            color: var(--cor-netflix-vermelho);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .logo span {
            font-size: 2.5rem;
            color: var(--cor-texto-principal);
            font-family: var(--fonte-titulo);
        }

        .user-nav { display: flex; align-items: center; gap: 20px; }
        .user-nav .nav-icon {
            color: var(--cor-texto-principal);
            font-size: 1.5rem;
            text-decoration: none;
            transition: transform 0.2s ease;
        }
        .user-nav .nav-icon:hover { transform: scale(1.1); }
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        .user-profile img {
            width: 32px;
            height: 32px;
            border-radius: 5px;
            object-fit: cover;
        }

        .hero-section {
            width: 100%;
            height: 90vh;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            align-items: center;
            padding-left: 50px;
        }
        .hero-section::after {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, rgba(20, 20, 20, 1) 20%, rgba(20, 20, 20, 0.6) 50%, rgba(20, 20, 20, 0) 100%);
        }
        .hero-content {
            z-index: 10;
            max-width: 45%;
        }
        .hero-content h1 {
            font-family: var(--fonte-titulo);
            font-size: 5rem;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        .hero-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
            color: var(--cor-texto-secundario);
            font-weight: 500;
        }
        .hero-meta .stars { color: #f5c518; }
        .hero-meta .age-rating {
            border: 1px solid var(--cor-texto-secundario);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.9rem;
        }
        .hero-content p.description {
            font-size: 1.1rem;
            line-height: 1.5;
            margin-top: 15px;
            max-width: 600px;
            color: var(--cor-netflix-cinza-claro);
        }
        .hero-content .elenco {
            margin-top: 10px;
            font-size: 1rem;
            color: var(--cor-netflix-cinza-claro);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .hero-content .elenco img {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            object-fit: cover;
        }

        .hero-buttons {
            margin-top: 25px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: transform 0.2s ease;
            white-space: nowrap;
        }
        .btn:hover { transform: scale(1.05); }
        .btn-primary {
            background-color: var(--cor-texto-principal);
            color: var(--cor-netflix-preto);
        }
        .btn-secondary {
            background-color: rgba(109, 109, 110, 0.7);
            color: var(--cor-texto-principal);
        }

        .catalog-container {
            padding: 0 0 50px 50px;
            margin-top: -40px;
            position: relative;
            z-index: 20;
        }
        .topic-row { margin-bottom: 40px; }
        .row-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        .row-content {
            display: flex;
            overflow-x: auto;
            overflow-y: hidden;
            gap: 10px;
            padding-bottom: 20px;
        }
        .row-content::-webkit-scrollbar { height: 8px; }
        .row-content::-webkit-scrollbar-track { background: var(--cor-netflix-cinza-escuro); border-radius: 10px; }
        .row-content::-webkit-scrollbar-thumb { background: var(--cor-netflix-vermelho); border-radius: 10px; }

        .topic-card {
            flex: 0 0 280px;
            height: 160px;
            background-color: var(--cor-netflix-cinza-escuro);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background-size: cover;
            background-position: center;
        }
        .topic-card:hover {
            transform: scale(1.1);
            z-index: 50;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .card-overlay {
            width: 100%;
            height: 100%;
            background: linear-gradient(0deg, rgba(20, 20, 20, 0.9) 0%, rgba(20, 20, 20, 0) 50%);
            display: flex;
            align-items: flex-end;
            padding: 15px;
        }
        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        /* --- TELA DE DETALHES --- */
        #detail-view {
            padding: 40px;
            background-color: var(--cor-netflix-preto);
            flex-direction: row;
            align-items: flex-start;
            gap: 30px;
        }
        
        .detail-main-content {
            flex: 1;
            max-width: 900px;
            margin: 0 auto;
            animation: slideUp 0.6s ease-out;
        }

        .back-button {
            background: none;
            border: none;
            color: var(--cor-texto-principal);
            font-size: 2.5rem;
            cursor: pointer;
            margin-bottom: 20px;
            transition: color 0.2s ease;
        }
        .back-button:hover { color: var(--cor-netflix-vermelho); }

        /* --- MENU LATERAL DE EPIS√ìDIOS --- */
        #episode-menu {
            width: 320px;
            height: calc(100vh - 80px);
            background-color: var(--cor-netflix-cinza-escuro);
            border-radius: 10px;
            padding: 20px;
            overflow-y: auto;
        }
        #episode-menu h3 {
            font-family: var(--fonte-titulo);
            font-size: 1.8rem;
            color: var(--cor-texto-principal);
            margin-bottom: 20px;
        }
        #episode-menu ul { list-style: none; }
        #episode-menu li {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-left: 4px solid transparent;
        }
        #episode-menu li:hover { background-color: rgba(255,255,255,0.1); }
        #episode-menu li.active {
            background-color: var(--cor-netflix-preto);
            border-left: 4px solid var(--cor-netflix-vermelho);
            font-weight: bold;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- ESTILOS ADAPTADOS DO CONTE√öDO --- */
        .detail-content h2 {
            font-family: var(--fonte-titulo);
            font-size: 3rem;
            color: var(--cor-texto-principal);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--cor-netflix-vermelho);
        }
         .detail-content h3 {
            font-family: var(--fonte-titulo);
            font-size: 1.8rem;
            color: var(--cor-netflix-cinza-claro);
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .detail-content h4 {
            font-family: var(--fonte-titulo);
            font-size: 1.5rem;
            color: var(--cor-netflix-vermelho);
            margin-top: 25px;
            margin-bottom: 10px;
        }
        .detail-content p, .detail-content li {
            font-size: 1.1rem;
            line-height: 1.7;
            color: var(--cor-netflix-cinza-claro);
            margin-bottom: 15px;
        }
        .detail-content ul { padding-left: 25px; }
        .detail-content strong {
            color: #fff;
            font-weight: 700;
        }
        .detail-content .imagem-container {
            border: 2px solid #444;
            border-radius: 8px;
            overflow: hidden;
            margin: 25px auto;
            max-width: 700px;
            background-color: var(--cor-netflix-cinza-escuro);
        }
        .detail-content .imagem-container img {
            width: 100%;
            height: auto;
            display: block;
            object-fit: contain;
        }
        .detail-content .imagem-container p.legenda {
            padding: 10px 15px;
            margin: 0;
            text-align: center;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--cor-texto-secundario);
        }
        
        .detail-content .rodape-pagina {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 2px solid var(--cor-netflix-vermelho);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .detail-content .rodape-foto img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--cor-netflix-vermelho);
        }
        .detail-content .rodape-info p { margin: 0; line-height: 1.4; }
        .detail-content .rodape-info p:first-child { font-size: 1.2rem; }
        
        /* --- ESTILOS DO ACORDE√ÉO --- */
        .acordeao {
            border-bottom: 1px solid var(--cor-netflix-cinza-medio);
            margin-bottom: 10px;
            overflow: hidden;
        }
        .acordeao-titulo {
            background-color: transparent;
            padding: 20px 10px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1.5rem;
            transition: color 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--cor-netflix-cinza-claro);
        }
        .acordeao-titulo:hover {
            color: var(--cor-texto-principal);
        }
        .acordeao-titulo::after {
            content: '+';
            font-size: 2.5rem;
            transition: transform 0.3s ease;
            font-weight: 300;
        }
        .acordeao-titulo.active::after {
            transform: rotate(45deg);
        }
        .acordeao-conteudo {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .acordeao-conteudo-interno {
             padding: 0 15px 20px 15px;
        }

        /* --- ESTILOS DO QUIZ --- */
        .quiz-container {
            background-color: var(--cor-netflix-cinza-escuro);
            padding: 30px;
            border-radius: 8px;
        }
        .quiz-question {
            margin-bottom: 25px;
        }
        .quiz-question p { font-weight: bold; font-size: 1.2rem; }
        .quiz-options label {
            display: block;
            padding: 12px;
            margin-bottom: 8px;
            background-color: var(--cor-netflix-cinza-medio);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .quiz-options label:hover {
            border-color: var(--cor-netflix-vermelho);
        }
        .quiz-options input {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .quiz-options label.correct {
            background-color: var(--cor-sucesso);
            border-color: var(--cor-sucesso);
            color: #fff;
        }
        .quiz-options label.incorrect {
            background-color: var(--cor-erro);
            border-color: var(--cor-erro);
            color: #fff;
        }
        #quiz-results {
            margin-top: 30px;
            padding: 20px;
            background-color: var(--cor-netflix-preto);
            border: 2px solid var(--cor-netflix-vermelho);
            border-radius: 8px;
            text-align: center;
        }
        #quiz-results h3 { font-family: var(--fonte-titulo); font-size: 2rem; }
        #quiz-score { font-size: 1.5rem; margin-top: 10px; }
        #btn-verificar-quiz {
            margin-top: 20px;
            background-color: var(--cor-netflix-vermelho);
        }
        #btn-verificar-quiz:hover {
            background-color: var(--cor-netflix-vermelho-escuro);
        }
        
        /* --- FLASHCARDS --- */
        .flashcard-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }
        .flashcard {
            width: 300px;
            height: 200px;
            perspective: 1000px;
            cursor: pointer;
        }
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            border-radius: 10px;
        }
        .flashcard.virado .flashcard-inner {
            transform: rotateY(180deg);
        }
        .flashcard-frente, .flashcard-verso {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #444;
        }
        .flashcard-frente {
            background-color: var(--cor-netflix-cinza-escuro);
            color: var(--cor-texto-principal);
            font-weight: bold;
            font-size: 1.3rem;
        }
        .flashcard-verso {
            background-color: var(--cor-netflix-vermelho);
            color: white;
            transform: rotateY(180deg);
            font-size: 1rem;
        }

        /* --- RESPONSIVIDADE --- */
        @media (max-width: 1200px) {
            #episode-menu {
                position: fixed;
                left: 0;
                top: 0;
                width: 300px;
                height: 100vh;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 150;
                padding-top: 60px;
            }
            #episode-menu.open { transform: translateX(0); }
            #detail-view {
                flex-direction: column;
                padding: 20px;
            }
            .menu-toggle-btn {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 160;
                background: var(--cor-netflix-vermelho);
                color: white;
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 20px;
                cursor: pointer;
            }
        }

        @media (max-width: 768px) {
            #splash-logo-view .splash-logo { font-size: 4rem; }

            #browse-view header { padding: 15px 20px; }
            .header-left { gap: 15px; }
            .logo { font-size: 2rem; }
            .logo span { font-size: 2rem; }
            .user-nav { gap: 10px; }
            .user-profile span, .user-profile .ph-caret-down { display: none; }
            
            .hero-section { padding-left: 20px; height: 70vh; }
            .hero-content { max-width: 90%; }
            .hero-content h1 { font-size: 3.5rem; }
            .hero-content p.description { font-size: 1rem; }

            .catalog-container { padding: 0 0 20px 20px; margin-top: -100px; }
            .row-title { font-size: 1.4rem; }
            .topic-card { flex: 0 0 220px; height: 125px; }

            .detail-content h2 { font-size: 2.2rem; }
            .detail-content p, .detail-content li { font-size: 1rem; }
        }

        .menu-toggle-btn { display: none; }
    </style>
</head>
<body>

<!-- TELAS DE SPLASH -->
<div id="splash-logo-view" class="splash-screen">
    <h1 class="splash-logo">MAPDFLIX</h1>
</div>
<div id="splash-tudum-view" class="splash-screen" style="display: none;">
    <img src="eme.jpg" alt="M Logo" class="splash-m-img">
</div>

<div id="app-container">
    <!-- TELA DE NAVEGA√á√ÉO (CAT√ÅLOGO) -->
    <div id="browse-view" class="view">
        <header id="main-header">
            <div class="header-left">
                <div class="logo">MAPD<span>flix</span></div>
            </div>
            <div class="user-nav">
                <a href="#" class="nav-icon" aria-label="Buscar"><i class="ph-bold ph-magnifying-glass"></i></a>
                <a href="#" class="nav-icon" aria-label="Notifica√ß√µes"><i class="ph-bold ph-bell"></i></a>
                <div class="user-profile">
                    <img src="foto.jpg" alt="Foto do usu√°rio">
                    <span>Medicina UNIP√ä</span>
                    <i class="ph-bold ph-caret-down"></i>
                </div>
            </div>
        </header>

        <section class="hero-section" style="background-image: url('background.jpg');">
            <div class="hero-content">
                <h1>Les√µes e Adapta√ß√µes Celulares</h1>
                <div class="hero-meta">
                    <span class="stars" aria-label="5 de 5 estrelas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    <span class="meta-item">2025</span>
                    <span class="meta-item age-rating">L</span>
                    <span class="meta-item">2h 30min</span>
                </div>
                <p class="description">Compreendendo como as c√©lulas respondem ao estresse e √† agress√£o, desde a homeostase at√© a morte celular.</p>
                <div class="elenco">
                    <img src="foto.jpg" alt="Foto do Professor">
                    <span>Prof. Rodrigo Niskier</span>
                </div>
                <div class="hero-buttons">
                    <button class="btn btn-primary" id="start-journey-btn"><i class="ph-bold ph-play"></i> Iniciar Aula</button>
                    <button class="btn btn-secondary" id="add-list-btn"><i class="ph-bold ph-plus"></i> Minha Lista</button>
                </div>
            </div>
        </section>

        <main class="catalog-container">
            <!-- As linhas de t√≥picos ser√£o injetadas aqui pelo JS -->
        </main>
    </div>

    <!-- TELA DE DETALHES DO T√ìPICO -->
    <div id="detail-view" class="view">
        <button class="menu-toggle-btn" id="menu-toggle">‚ò∞</button>
        <nav id="episode-menu">
            <!-- Menu de epis√≥dios ser√° injetado aqui -->
        </nav>
        <div class="detail-main-content">
            <button class="back-button" id="back-to-browse-btn" title="Voltar ao Cat√°logo">
                <i class="ph-bold ph-arrow-left"></i>
            </button>
            <div class="detail-content" id="detail-content-container">
                <!-- O conte√∫do do slide ser√° injetado aqui pelo JS -->
            </div>
        </div>
    </div>
</div>

<!-- Conte√∫do original da aula, oculto para parsing -->
<div id="original-content" style="display:none;">

    <!-- SLIDE 1: Capa (Usado no Hero) -->
    <section class="slide" data-title="Les√µes e Adapta√ß√µes Celulares" data-category="Destaque">
        <div class="slide-content"></div>
    </section>

    <!-- SLIDES DE CONTE√öDO -->
    <section class="slide" data-title="Introdu√ß√£o √† Patologia" data-category="Conte√∫do da Aula" data-img="introducao.jpg">
        <div class="slide-content">
            <h2>üéì 1. Introdu√ß√£o √† Patologia Celular</h2>
            <div class="acordeao">
                <div class="acordeao-titulo">O que √© Patologia Celular?</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p>A patologia √© o estudo das doen√ßas, focando nas altera√ß√µes estruturais e funcionais que ocorrem em c√©lulas, tecidos e √≥rg√£os. Para compreender a doen√ßa, √© essencial come√ßar pelo n√≠vel celular. As c√©lulas s√£o as unidades fundamentais da vida e est√£o constantemente se ajustando a mudan√ßas em seu ambiente. Esta aula explora as respostas celulares ao estresse e aos est√≠mulos nocivos, que v√£o desde adapta√ß√µes bem-sucedidas at√© a les√£o e, finalmente, a morte celular.</p>
                </div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">O Conceito de Homeostase</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p>O corpo humano busca incessantemente um estado de equil√≠brio din√¢mico conhecido como <strong>homeostase</strong>. Quando confrontadas com estresses fisiol√≥gicos ou est√≠mulos patol√≥gicos, as c√©lulas tentam preservar sua viabilidade e fun√ß√£o, mantendo a homeostase. Esta capacidade de resposta √© central para a sa√∫de e a doen√ßa.</p>
                    <div class="imagem-container">
                        <img src="homeostase.jpg" alt="Diagrama de Homeostase">
                        <p class="legenda">Diagrama ilustrando o conceito de homeostase, onde o corpo mant√©m um ambiente interno est√°vel.</p>
                    </div>
                </div></div>
            </div>
        </div>
    </section>
    
    <section class="slide" data-title="Causas de Agress√£o" data-category="Conte√∫do da Aula" data-img="agressao.jpg">
         <div class="slide-content">
            <h2>‚öñÔ∏è 2. Homeostase e as Causas de Agress√£o Celular</h2>
            <p>A homeostase √© a manuten√ß√£o de um ambiente interno est√°vel. No entanto, diversos agentes e condi√ß√µes podem perturbar esse equil√≠brio. Clique nos itens abaixo para explorar as principais causas de les√£o celular:</p>
            <div class="acordeao">
                <div class="acordeao-titulo">üìâ Hip√≥xia e Isquemia</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno"><p>A hip√≥xia √© a defici√™ncia de oxig√™nio, uma causa extremamente comum e importante de les√£o celular. A isquemia, a perda de suprimento sangu√≠neo, √© a causa mais comum de hip√≥xia. Sem oxig√™nio, a respira√ß√£o aer√≥bica cessa, levando √† deple√ß√£o de ATP e falha de m√∫ltiplas fun√ß√µes celulares.</p></div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">üî• Agentes F√≠sicos</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno"><p>Trauma mec√¢nico, temperaturas extremas (queimaduras, congelamento), mudan√ßas s√∫bitas na press√£o atmosf√©rica, radia√ß√£o e choque el√©trico.</p></div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">üß™ Agentes Qu√≠micos e Drogas</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno"><p>Subst√¢ncias como glicose ou sal em concentra√ß√µes hipert√¥nicas, venenos (ars√™nico, cianeto), poluentes, √°lcool, narc√≥ticos e drogas terap√™uticas em doses t√≥xicas.</p></div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">ü¶† Agentes Infecciosos</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno"><p>V√≠rus, bact√©rias, fungos e parasitas causam les√£o por diversos mecanismos.</p></div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">üõ°Ô∏è Rea√ß√µes Imunol√≥gicas</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno"><p>Embora o sistema imune seja defensivo, suas rea√ß√µes podem causar les√£o, como em doen√ßas autoimunes ou rea√ß√µes al√©rgicas.</p></div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">üçî Desequil√≠brios Nutricionais</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno"><p>Defici√™ncias de prote√≠nas e vitaminas, bem como excessos nutricionais, como a obesidade, que aumenta o risco de diabetes tipo 2 e aterosclerose.</p></div></div>
            </div>
        </div>
    </section>

    <section class="slide" data-title="Adapta√ß√µes Celulares" data-category="Conte√∫do da Aula" data-img="adaptacoes.jpg">
        <div class="slide-content">
            <h2>üîÑ 3. Adapta√ß√µes Celulares ao Estresse</h2>
            <p>Quando as c√©lulas s√£o submetidas a um estresse persistente, mas n√£o letal, elas podem sofrer adapta√ß√µes. Estas s√£o altera√ß√µes <strong>revers√≠veis</strong> no tamanho, n√∫mero, fen√≥tipo, atividade metab√≥lica ou fun√ß√µes celulares. As principais adapta√ß√µes s√£o:</p>
            <div class="acordeao">
                <div class="acordeao-titulo">üí™ Hipertrofia</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p><strong>Defini√ß√£o:</strong> Aumento no tamanho das c√©lulas, resultando em um aumento no tamanho do √≥rg√£o. N√£o h√° novas c√©lulas, apenas c√©lulas maiores.</p>
                    <p><strong>Mecanismo:</strong> Ocorre em c√©lulas com capacidade de divis√£o limitada, como as c√©lulas musculares esquel√©ticas e card√≠acas. √â resultado do aumento da produ√ß√£o de prote√≠nas celulares.</p>
                    <p><strong>Exemplo Fisiol√≥gico:</strong> O aumento da musculatura esquel√©tica em atletas de levantamento de peso.</p>
                    <p><strong>Exemplo Patol√≥gico:</strong> A hipertrofia do m√∫sculo card√≠aco (ventr√≠culo esquerdo) em resposta √† hipertens√£o arterial cr√¥nica ou estenose a√≥rtica.</p>
                    <div class="imagem-container">
                        <img src="hipertrofia.jpg" alt="Hipertrofia Card√≠aca">
                        <p class="legenda">Rela√ß√£o entre as c√©lulas mioc√°rdicas normais, adaptadas, reversivelmente lesadas e mortas. A adapta√ß√£o celular aqui representada √© a hipertrofia, a causa da les√£o revers√≠vel √© a isquemia, enquanto a les√£o irrevers√≠vel √© a necrose coagulativa isqu√™mica. No exemplo de hipertrofia mioc√°rdica (parte inferior esquerda), a parede ventricular esquerda √© mais espessa que 2 cm (normal: entre 1 e 1,5 cm). O mioc√°rdio com les√£o revers√≠vel (parte superior direita) mostra um comprometimento funcional sem altera√ß√µes macrosc√≥picas ou microsc√≥picas leves, ou altera√ß√µes revers√≠veis como tumefa√ß√£o celular e altera√ß√£o adiposa (seta). Na amostra que exibe necrose (parte inferior direita), a √°rea transmural clara no ventr√≠culo esquerdo posterolateral representa um infarto agudo do mioc√°rdio. Os tr√™s cortes transversais do mioc√°rdio foram corados com cloreto de trifeniltetraz√≥lio, um substrato enzim√°tico que cora em magenta o mioc√°rdio vi√°vel. A falha na colora√ß√£o se deve √† perda de enzimas ap√≥s a morte celular..</p>
                    </div>
                </div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">‚ûï Hiperplasia</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p><strong>Defini√ß√£o:</strong> Aumento no n√∫mero de c√©lulas em um √≥rg√£o ou tecido, geralmente resultando em aumento da massa do √≥rg√£o ou tecido.</p>
                    <p><strong>Mecanismo:</strong> Ocorre em popula√ß√µes de c√©lulas capazes de se dividir. Pode ser causada por estimula√ß√£o hormonal ou por fatores de crescimento.</p>
                    <p><strong>Exemplo Fisiol√≥gico:</strong> A prolifera√ß√£o do epit√©lio glandular da mama feminina na puberdade e durante a gravidez (hiperplasia hormonal) ou a regenera√ß√£o do f√≠gado ap√≥s uma hepatectomia parcial (hiperplasia compensat√≥ria).</p>
                    <p><strong>Exemplo Patol√≥gico:</strong> A hiperplasia endometrial causada por estimula√ß√£o estrog√™nica excessiva, que pode levar a sangramento uterino anormal e aumentar o risco de carcinoma endometrial.</p>
                    <div class="imagem-container">
                        <img src="hipeplasia.jpg" alt="Hiperplasia Endometrial">
                        <p class="legenda">Micrografia de hiperplasia endometrial, mostrando um aumento no n√∫mero de gl√¢ndulas.</p>
                    </div>
                </div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">‚ûñ Atrofia</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p><strong>Defini√ß√£o:</strong> Redu√ß√£o no tamanho de um √≥rg√£o ou tecido como resultado de uma diminui√ß√£o no tamanho e n√∫mero de c√©lulas.</p>
                    <p><strong>Mecanismo:</strong> Resulta da diminui√ß√£o da s√≠ntese de prote√≠nas e do aumento da degrada√ß√£o de prote√≠nas nas c√©lulas. A via da ubiquitina-proteassoma √© crucial para a degrada√ß√£o acelerada de prote√≠nas.</p>
                    <p><strong>Causas Comuns:</strong> Desuso (atrofia de um membro imobilizado), denerva√ß√£o (perda de inerva√ß√£o nervosa), diminui√ß√£o do suprimento sangu√≠neo (isquemia), nutri√ß√£o inadequada, perda de estimula√ß√£o end√≥crina e envelhecimento.</p>
                    <div class="imagem-container">
                        <img src="atrofia.jpg" alt="Atrofia Cerebral">
                        <p class="legenda">Atrofia cerebral. A. C√©rebro normal de um adulto jovem. B. Atrofia cerebral em um homem de 81 anos com doen√ßa cerebrovascular ateroscler√≥tica. A atrofia cerebral se deve ao envelhecimento e ao reduzido suprimento sangu√≠neo.</p>
                    </div>
                </div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">‚ÜîÔ∏è Metaplasia</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p><strong>Defini√ß√£o:</strong> Uma altera√ß√£o revers√≠vel na qual um tipo de c√©lula adulta (epitelial ou mesenquimal) √© substitu√≠do por outro tipo de c√©lula adulta.</p>
                    <p><strong>Mecanismo:</strong> √â uma reprograma√ß√£o de c√©lulas-tronco que existem nos tecidos normais. O novo tipo celular √© mais resistente ao estresse que induziu a mudan√ßa.</p>
                    <p><strong>Exemplo Comum:</strong> A substitui√ß√£o do epit√©lio colunar ciliado normal do trato respirat√≥rio por epit√©lio escamoso estratificado em fumantes cr√¥nicos. Embora o epit√©lio escamoso seja mais resistente, ele perde fun√ß√µes protetoras importantes, como a secre√ß√£o de muco e a depura√ß√£o ciliar.</p>
                    <p><strong>Import√¢ncia Cl√≠nica:</strong> Se as influ√™ncias que induzem a metaplasia persistirem, elas podem predispor √† transforma√ß√£o maligna do epit√©lio.</p>
                    <div class="imagem-container">
                        <img src="metaplasia.jpg" alt="Metaplasia Br√¥nquica">
                        <p class="legenda">Metaplasia de epit√©lio colunar normal (esquerda) para epit√©lio escamoso em um br√¥nquio (direita) mostrada de formas esquem√°tica (A) e histol√≥gica (B).</p>
                    </div>
                </div></div>
            </div>
        </div>
    </section>

    <section class="slide" data-title="Les√£o Celular" data-category="Conte√∫do da Aula" data-img="lesao-celular.jpg">
        <div class="slide-content">
            <h2>üí• 4. Les√£o Celular: Revers√≠vel e Irrevers√≠vel</h2>
            <p>Se os limites da resposta adaptativa s√£o excedidos ou se as c√©lulas s√£o expostas a um agente agressor direto, ocorre a les√£o celular.</p>
            <div class="acordeao">
                <div class="acordeao-titulo">Les√£o Revers√≠vel</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p>Caracterizada por altera√ß√µes funcionais e morfol√≥gicas que s√£o revers√≠veis se o est√≠mulo nocivo for removido. As duas principais caracter√≠sticas morfol√≥gicas s√£o o <strong>edema celular</strong> (ac√∫mulo de √°gua devido √† falha das bombas i√¥nicas) e a <strong>degenera√ß√£o gordurosa</strong> (ac√∫mulo de vac√∫olos lip√≠dicos no citoplasma).</p>
                    <div class="imagem-container">
                        <img src="lesao-reversivel.jpg" alt="Les√£o Celular Revers√≠vel">
                        <p class="legenda">Edema celular, uma caracter√≠stica da les√£o revers√≠vel.</p>
                    </div>
                </div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">Les√£o Irrevers√≠vel (Morte Celular)</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p>Quando a les√£o se torna irrevers√≠vel, a c√©lula n√£o pode se recuperar e morre. A morte celular √© um processo central na patologia e ocorre por duas vias principais: <strong>necrose</strong> e <strong>apoptose</strong>. Os marcos da irreversibilidade incluem dano mitocondrial severo e ruptura das membranas plasm√°tica e lisoss√¥mica.</p>
                    <div class="imagem-container">
                        <img src="lesao-irreversivel.jpg" alt="Les√£o Celular Irrevers√≠vel">
                        <p class="legenda">Necrose, um exemplo de les√£o irrevers√≠vel com inflama√ß√£o.</p>
                    </div>
                </div></div>
            </div>
        </div>
    </section>

    <section class="slide" data-title="Casos Cl√≠nicos" data-category="Conte√∫do da Aula" data-img="casos-clinicos.jpg">
        <div class="slide-content">
            <h2>ü©∫ 5. Casos Cl√≠nicos Contextualizados (Jo√£o Pessoa, PB)</h2>
            <p>A aplica√ß√£o dos conceitos de patologia √† realidade local √© fundamental. Em Jo√£o Pessoa, as arboviroses (Dengue, Zika, Chikungunya) e a Leishmaniose s√£o desafios de sa√∫de p√∫blica que envolvem mecanismos de les√£o celular. (Dados epidemiol√≥gicos baseados em relat√≥rios da Secretaria de Sa√∫de de Jo√£o Pessoa e do Estado da Para√≠ba).</p>
            <div class="acordeao">
                <div class="acordeao-titulo">Caso 1: Les√£o Hep√°tica por Dengue</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p><strong>Apresenta√ß√£o:</strong> Um paciente de 35 anos, residente no bairro de Mangabeira, procura a UPA com febre alta, dor de cabe√ßa, dor retro-orbital e mialgia intensa h√° 4 dias. Exames laboratoriais revelam plaquetopenia e um aumento significativo das transaminases hep√°ticas (TGP/ALT e TGO/AST).</p>
                    <p><strong>Discuss√£o Patol√≥gica:</strong> O v√≠rus da Dengue pode causar les√£o direta aos hepat√≥citos (c√©lulas do f√≠gado), levando a uma <strong>les√£o celular revers√≠vel</strong> (edema celular) e, em casos mais graves, <strong>les√£o irrevers√≠vel</strong> com morte celular por apoptose. A resposta imune do hospedeiro contra as c√©lulas infectadas tamb√©m contribui para a les√£o hep√°tica. O aumento das enzimas hep√°ticas no sangue √© um marcador de que as membranas dos hepat√≥citos foram danificadas, liberando seu conte√∫do intracelular.</p>
                </div></div>
            </div>
            <div class="acordeao">
                <div class="acordeao-titulo">Caso 2: Adapta√ß√£o Celular no Es√¥fago</div>
                <div class="acordeao-conteudo"><div class="acordeao-conteudo-interno">
                    <p><strong>Apresenta√ß√£o:</strong> Uma paciente de 52 anos, obesa e com queixa cr√¥nica de azia e regurgita√ß√£o, realiza uma endoscopia digestiva alta. A bi√≥psia do es√¥fago distal revela a substitui√ß√£o do epit√©lio escamoso normal por um epit√©lio colunar com c√©lulas caliciformes.</p>
                    <p><strong>Discuss√£o Patol√≥gica:</strong> Este √© um exemplo cl√°ssico de <strong>metaplasia</strong>, conhecido como Es√¥fago de Barrett. O epit√©lio escamoso normal do es√¥fago n√£o √© resistente √† exposi√ß√£o cr√¥nica ao √°cido g√°strico. Como uma adapta√ß√£o, as c√©lulas-tronco locais se diferenciam em um epit√©lio colunar, semelhante ao do intestino, que √© mais resistente ao √°cido. Embora seja uma adapta√ß√£o protetora, essa metaplasia √© uma condi√ß√£o pr√©-maligna, aumentando significativamente o risco de adenocarcinoma de es√¥fago.</p>
                </div></div>
            </div>
        </div>
    </section>

    <!-- SLIDES DE RECURSOS ADICIONAIS -->
    <section class="slide" data-title="Flashcards" data-category="Recursos Adicionais" data-img="flashcards.jpg">
        <div class="slide-content">
            <h2>üóÇÔ∏è Flashcards: Termos-Chave</h2>
            <p>Clique nos cart√µes para revelar as defini√ß√µes.</p>
            <div class="flashcard-container">
                <div class="flashcard"><div class="flashcard-inner"><div class="flashcard-frente">Homeostase</div><div class="flashcard-verso">Estado de equil√≠brio din√¢mico do ambiente interno do corpo.</div></div></div>
                <div class="flashcard"><div class="flashcard-inner"><div class="flashcard-frente">Hipertrofia</div><div class="flashcard-verso">Aumento no tamanho das c√©lulas.</div></div></div>
                <div class="flashcard"><div class="flashcard-inner"><div class="flashcard-frente">Hiperplasia</div><div class="flashcard-verso">Aumento no n√∫mero de c√©lulas.</div></div></div>
                <div class="flashcard"><div class="flashcard-inner"><div class="flashcard-frente">Atrofia</div><div class="flashcard-verso">Diminui√ß√£o do tamanho e n√∫mero de c√©lulas.</div></div></div>
                <div class="flashcard"><div class="flashcard-inner"><div class="flashcard-frente">Metaplasia</div><div class="flashcard-verso">Altera√ß√£o revers√≠vel na qual um tipo de c√©lula adulta √© substitu√≠do por outro.</div></div></div>
                <div class="flashcard"><div class="flashcard-inner"><div class="flashcard-frente">Hip√≥xia</div><div class="flashcard-verso">Defici√™ncia de oxig√™nio nos tecidos.</div></div></div>
            </div>
        </div>
    </section>

    <section class="slide" data-title="Quiz Final" data-category="Recursos Adicionais" data-img="quiz.jpg">
        <div class="slide-content">
            <h2>‚úÖ Quiz e Prova</h2>
            <p>Teste seus conhecimentos sobre os conceitos apresentados.</p>
            <div class="quiz-container">
                <form id="quiz-form"></form>
                <div id="quiz-results" style="display: none;">
                    <h3>Resultado Final</h3>
                    <p id="quiz-score"></p>
                </div>
            </div>
             <footer class="rodape-pagina">
                <div class="rodape-foto">
                    <img src="foto.jpg" alt="Foto do Professor Rodrigo Niskier">
                </div>
                <div class="rodape-info">
                    <p><strong>Prof. Rodrigo Niskier</strong></p>
                    <p>Curso de Medicina</p>
                    <p><em>Mecanismos de Agress√£o, Patol√≥gicos e de Defesa 1</em></p>
                </div>
            </footer>
        </div>
    </section>
    
    <section class="slide" data-title="Apostila para Impress√£o" data-category="Recursos Adicionais" data-img="apostila.jpg">
         <div class="slide-content">
            <!-- Conte√∫do gerado via JS -->
         </div>
    </section>
</div>


<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- ELEMENTOS DO DOM ---
    const splashLogoView = document.getElementById('splash-logo-view');
    const splashTudumView = document.getElementById('splash-tudum-view');
    const appContainer = document.getElementById('app-container');
    const browseView = document.getElementById('browse-view');
    const detailView = document.getElementById('detail-view');
    const catalogContainer = document.querySelector('.catalog-container');
    const detailContentContainer = document.getElementById('detail-content-container');
    const backBtn = document.getElementById('back-to-browse-btn');
    const startJourneyBtn = document.getElementById('start-journey-btn');
    const mainHeader = document.getElementById('main-header');
    const episodeMenu = document.getElementById('episode-menu');
    const menuToggleBtn = document.getElementById('menu-toggle');

    // --- DADOS E ESTADO ---
    let topicsData = [];
    let categories = {};

    // --- L√ìGICA DA TELA DE SPLASH ---
    const synth = new Tone.Synth({
        oscillator: { type: 'sine' },
        envelope: { attack: 0.005, decay: 0.1, sustain: 0.3, release: 1 }
    }).toDestination();

    function playTudumSound() {
        const now = Tone.now();
        synth.triggerAttackRelease("G2", "8n", now);
        synth.triggerAttackRelease("D3", "8n", now + 0.2);
    }

    function startTudum() {
        splashLogoView.style.opacity = '0';
        splashTudumView.style.display = 'flex';
        setTimeout(() => {
            splashLogoView.style.display = 'none';
            const mImg = document.querySelector('.splash-m-img');
            mImg.classList.add('animate');
            Tone.start().then(playTudumSound);
            setTimeout(showApp, 1500);
        }, 500);
    }
    
    function showApp() {
        splashTudumView.style.opacity = '0';
        setTimeout(() => {
            splashTudumView.style.display = 'none';
            document.body.style.overflowY = 'auto';
            appContainer.style.display = 'block';
            browseView.classList.add('active');
        }, 500);
    }
    
    splashLogoView.addEventListener('click', startTudum);

    // --- FUN√á√ïES PRINCIPAIS DO APP ---
    function parseOriginalContent() {
        const originalSlides = document.querySelectorAll('#original-content .slide');
        originalSlides.forEach((slide, index) => {
            const title = slide.dataset.title;
            const category = slide.dataset.category;
            const img = slide.dataset.img;
            const content = slide.querySelector('.slide-content').innerHTML;
            const topic = { id: index, title, category, img, content };
            
            topicsData.push(topic);

            if (category && category !== 'Destaque') {
                if (!categories[category]) {
                    categories[category] = [];
                }
                categories[category].push(topic);
            }
        });
    }

    function renderCatalog() {
        catalogContainer.innerHTML = '';
        for (const categoryName in categories) {
            const row = document.createElement('div');
            row.className = 'topic-row';
            
            const rowTitle = document.createElement('h2');
            rowTitle.className = 'row-title';
            rowTitle.textContent = categoryName;
            row.appendChild(rowTitle);
            
            const rowContent = document.createElement('div');
            rowContent.className = 'row-content';
            
            categories[categoryName].forEach(topic => {
                const card = document.createElement('div');
                card.className = 'topic-card';
                card.style.backgroundImage = `url('${topic.img}')`;
                card.dataset.topicId = topic.id;
                card.innerHTML = `<div class="card-overlay"><h3 class="card-title">${topic.title}</h3></div>`;
                card.addEventListener('click', () => showTopicDetails(topic.id));
                rowContent.appendChild(card);
            });
            
            row.appendChild(rowContent);
            catalogContainer.appendChild(row);
        }
    }

    function renderEpisodeMenu(currentTopicId) {
        const episodeTopics = topicsData.filter(t => t.category !== 'Destaque');

        let menuHTML = `<h3>Menu da Aula</h3><ul>`;
        episodeTopics.forEach(topic => {
            const isActive = topic.id === currentTopicId ? 'active' : '';
            menuHTML += `<li data-topic-id="${topic.id}" class="${isActive}">${topic.title}</li>`;
        });
        menuHTML += `</ul>`;
        episodeMenu.innerHTML = menuHTML;
    }

    function setupAccordions() {
        const acordeoes = detailContentContainer.querySelectorAll('.acordeao-titulo');
        acordeoes.forEach(acc => {
            acc.addEventListener('click', () => {
                acc.classList.toggle('active');
                const content = acc.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        });
    }

    function showTopicDetails(topicId) {
        const topic = topicsData.find(t => t.id === topicId);
        if (!topic) return;
        
        if (topic.title === "Apostila para Impress√£o") {
            let fullContent = `
                <h2>üñ®Ô∏è Apostila para Impress√£o</h2>
                <p>Abaixo est√° todo o conte√∫do da aula em formato de texto cont√≠nuo. Use a fun√ß√£o de impress√£o do seu navegador (Ctrl+P ou Cmd+P) para imprimir.</p>
                <hr style="margin: 20px 0; border-color: #444;">
            `;
            topicsData.forEach(t => {
                if (t.category === 'Conte√∫do da Aula') {
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = t.content;
                    tempDiv.querySelectorAll('.imagem-container, .rodape-pagina, .acordeao-titulo, .acordeao-conteudo').forEach(el => {
                        if(el.classList.contains('acordeao-titulo')) {
                            const h3 = document.createElement('h3');
                            h3.innerHTML = el.innerHTML.replace(/::after/g, '');
                            el.parentNode.replaceChild(h3, el);
                        }
                    });
                     // Extrai o conte√∫do interno dos acorde√µes para a apostila
                    const internalContent = Array.from(tempDiv.querySelectorAll('.acordeao-conteudo-interno')).map(div => div.innerHTML).join('');
                    const mainTitle = tempDiv.querySelector('h2').outerHTML;
                    const mainParagraph = tempDiv.querySelector('p') ? tempDiv.querySelector('p').outerHTML : '';
                    
                    fullContent += mainTitle + mainParagraph + internalContent;
                }
            });
            detailContentContainer.innerHTML = fullContent;
        } else {
             detailContentContainer.innerHTML = topic.content;
        }
       
        renderEpisodeMenu(topic.id);
        
        if (topic.title === "Quiz Final") {
            setupQuiz();
        }

        setupAccordions();

        const flashcards = detailContentContainer.querySelectorAll('.flashcard');
        flashcards.forEach(card => {
            card.addEventListener('click', () => {
                card.classList.toggle('virado');
            });
        });
        
        browseView.classList.remove('active');
        detailView.classList.add('active');
        window.scrollTo(0, 0);
    }

    function backToBrowse() {
        detailView.classList.remove('active');
        browseView.classList.add('active');
        detailContentContainer.innerHTML = '';
        episodeMenu.classList.remove('open');
    }

    function handleHeaderScroll() {
        if (browseView.classList.contains('active')) {
            mainHeader.classList.toggle('scrolled', window.scrollY > 50);
        }
    }
    
    // --- L√ìGICA DO QUIZ ---
    const quizData = {
        questions: [
            { q: "1. O aumento da musculatura esquel√©tica em um indiv√≠duo que pratica levantamento de peso √© um exemplo cl√°ssico de qual processo de adapta√ß√£o celular?", o: ["a) Hiperplasia", "b) Metaplasia", "c) Hipertrofia", "d) Atrofia", "e) Displasia"], a: "c" },
            { q: "2. Um fumante cr√¥nico desenvolve uma altera√ß√£o no epit√©lio br√¥nquico, onde o epit√©lio colunar ciliado pseudoestratificado √© substitu√≠do por epit√©lio escamoso estratificado. Como se chama essa adapta√ß√£o?", o: ["a) Hiperplasia", "b) Metaplasia", "c) Hipertrofia", "d) Anaplasia", "e) Atrofia"], a: "b" },
            { q: "3. Qual das seguintes op√ß√µes √© a causa mais comum de hip√≥xia e les√£o celular?", o: ["a) Rea√ß√µes imunol√≥gicas", "b) Agentes infecciosos", "c) Trauma f√≠sico", "d) Isquemia", "e) Desequil√≠brio nutricional"], a: "d" },
            { q: "4. A imobiliza√ß√£o de um membro fraturado com gesso leva √† diminui√ß√£o da massa muscular nesse membro. Este fen√¥meno √© denominado:", o: ["a) Atrofia por desuso", "b) Hipoplasia", "c) Necrose", "d) Hipertrofia compensat√≥ria", "e) Metaplasia por desuso"], a: "a" },
            { q: "5. O crescimento do √∫tero durante a gravidez √© um exemplo de:", o: ["a) Apenas hipertrofia", "b) Apenas hiperplasia", "c) Hipertrofia e hiperplasia", "d) Metaplasia e displasia", "e) Apenas atrofia"], a: "c" },
            { q: "6. Qual das seguintes altera√ß√µes √© considerada um marco de les√£o celular irrevers√≠vel?", o: ["a) Edema celular", "b) Degenera√ß√£o gordurosa", "c) Dano mitocondrial severo e ruptura de membranas", "d) Diminui√ß√£o do pH intracelular", "e) Desprendimento de ribossomos do ret√≠culo endoplasm√°tico"], a: "c" },
            { q: "7. A hiperplasia patol√≥gica, como a hiperplasia endometrial, aumenta o risco de desenvolvimento de:", o: ["a) Infec√ß√£o", "b) C√¢ncer", "c) Atrofia", "d) Isquemia", "e) Resposta autoimune"], a: "b" },
            { q: "8. O Es√¥fago de Barrett √© um exemplo de metaplasia que ocorre em resposta a qual est√≠mulo cr√¥nico?", o: ["a) Infec√ß√£o por H. pylori", "b) Fuma√ßa de cigarro", "c) Radia√ß√£o ultravioleta", "d) Refluxo de √°cido g√°strico", "e) Defici√™ncia de vitamina A"], a: "d" },
            { q: "9. A via da ubiquitina-proteassoma √© um mecanismo fundamental em qual processo adaptativo?", o: ["a) Hipertrofia", "b) Hiperplasia", "c) Metaplasia", "d) Atrofia", "e) Ac√∫mulo de lip√≠dios"], a: "d" },
            { q: "10. Qual das seguintes op√ß√µes N√ÉO √© considerada uma causa de agress√£o celular?", o: ["a) Agentes infecciosos", "b) Homeostase controlada", "c) Agentes qu√≠micos", "d) Hip√≥xia", "e) Rea√ß√µes imunol√≥gicas"], a: "b" },
            { q: "11. A hipertrofia card√≠aca em resposta √† hipertens√£o arterial cr√¥nica √© um exemplo de adapta√ß√£o:", o: ["a) Fisiol√≥gica", "b) Patol√≥gica", "c) Metapl√°sica", "d) Transit√≥ria e sem consequ√™ncias", "e) Neopl√°sica"], a: "b" },
            { q: "12. A regenera√ß√£o do f√≠gado ap√≥s a remo√ß√£o de parte dele √© um exemplo de:", o: ["a) Hiperplasia compensat√≥ria", "b) Hipertrofia compensat√≥ria", "c) Metaplasia hep√°tica", "d) Atrofia hep√°tica", "e) Neoplasia hep√°tica"], a: "a" },
            { q: "13. Todas as adapta√ß√µes celulares a seguir s√£o, em princ√≠pio, revers√≠veis. Qual delas, se persistir o est√≠mulo, confere um risco aumentado para transforma√ß√£o maligna?", o: ["a) Atrofia", "b) Hipertrofia", "c) Metaplasia", "d) Atrofia senil", "e) Hipertrofia muscular"], a: "c" },
            { q: "14. O edema celular, uma das primeiras manifesta√ß√µes de les√£o celular revers√≠vel, √© causado principalmente por:", o: ["a) Aumento da s√≠ntese de prote√≠nas", "b) Falha das bombas i√¥nicas dependentes de ATP", "c) Ruptura da membrana lisoss√¥mica", "d) Dano ao DNA nuclear", "e) Ativa√ß√£o da via da apoptose"], a: "b" },
            { q: "15. Qual das seguintes c√©lulas tem a maior capacidade de sofrer hiperplasia?", o: ["a) Neur√¥nios", "b) C√©lulas musculares card√≠acas", "c) C√©lulas musculares esquel√©ticas", "d) Hepat√≥citos", "e) C√©lulas do cristalino"], a: "d" },
            { q: "16. A atrofia cerebral observada em idosos √© um exemplo de atrofia:", o: ["a) Por desuso", "b) Por denerva√ß√£o", "c) Fisiol√≥gica (senil)", "d) Isqu√™mica", "e) Por press√£o"], a: "c" },
            { q: "17. A principal diferen√ßa entre hipertrofia e hiperplasia √©:", o: ["a) Hipertrofia √© patol√≥gica, hiperplasia √© fisiol√≥gica.", "b) Hipertrofia √© aumento do tamanho celular, hiperplasia √© aumento do n√∫mero de c√©lulas.", "c) Hipertrofia ocorre em c√©lulas l√°beis, hiperplasia em c√©lulas permanentes.", "d) Hipertrofia √© irrevers√≠vel, hiperplasia √© revers√≠vel.", "e) Hipertrofia envolve s√≠ntese de DNA, hiperplasia n√£o."], a: "b" },
            { q: "18. Em um contexto de les√£o hep√°tica por Dengue, o aumento de transaminases no sangue indica:", o: ["a) Adapta√ß√£o hep√°tica bem-sucedida", "b) Hiperplasia dos hepat√≥citos", "c) Perda da integridade da membrana dos hepat√≥citos", "d) Atrofia do f√≠gado", "e) Metaplasia intestinal no f√≠gado"], a: "c" },
            { q: "19. Todas as op√ß√µes a seguir s√£o adapta√ß√µes celulares, EXCETO:", o: ["a) Hiperplasia", "b) Hipertrofia", "c) Atrofia", "d) Metaplasia", "e) Necrose"], a: "e" },
            { q: "20. A reprograma√ß√£o de c√©lulas-tronco para gerar um novo fen√≥tipo celular √© o mecanismo subjacente a qual processo?", o: ["a) Atrofia", "b) Hipertrofia", "c) Metaplasia", "d) Les√£o revers√≠vel", "e) Degenera√ß√£o gordurosa"], a: "c" }
        ],
        gabarito: { q1: 'c', q2: 'b', q3: 'd', q4: 'a', q5: 'c', q6: 'c', q7: 'b', q8: 'd', q9: 'd', q10: 'b', q11: 'b', q12: 'a', q13: 'c', q14: 'b', q15: 'd', q16: 'c', q17: 'b', q18: 'c', q19: 'e', q20: 'c' }
    };

    function setupQuiz() {
        const quizForm = document.getElementById('quiz-form');
        if (!quizForm) return;

        let quizHTML = '';
        quizData.questions.forEach((item, index) => {
            const questionKey = `q${index + 1}`;
            quizHTML += `<div class="quiz-question"><p>${item.q}</p><div class="quiz-options">`;
            item.o.forEach((option, optionIndex) => {
                const optionValue = String.fromCharCode(97 + optionIndex); // a, b, c...
                quizHTML += `<label><input type="radio" name="${questionKey}" value="${optionValue}"> ${option}</label>`;
            });
            quizHTML += `</div></div>`;
        });
        
        quizHTML += `<button type="button" class="btn btn-primary" id="btn-verificar-quiz">üöÄ Verificar Respostas</button>`;
        quizForm.innerHTML = quizHTML;

        const btnVerificarQuiz = document.getElementById('btn-verificar-quiz');
        btnVerificarQuiz.addEventListener('click', () => {
            let acertos = 0;
            const totalQuestoes = quizData.questions.length;
            const gabarito = quizData.gabarito;
            
            for (let i = 1; i <= totalQuestoes; i++) {
                const questao = 'q' + i;
                const respostaSelecionada = quizForm.querySelector(`input[name="${questao}"]:checked`);
                const alternativas = quizForm.querySelectorAll(`input[name="${questao}"]`);
                
                alternativas.forEach(input => {
                    input.parentElement.classList.remove('correct', 'incorrect');
                });

                if (respostaSelecionada) {
                    const labelSelecionada = respostaSelecionada.parentElement;
                    if (respostaSelecionada.value === gabarito[questao]) {
                        acertos++;
                        labelSelecionada.classList.add('correct');
                    } else {
                        labelSelecionada.classList.add('incorrect');
                        const respostaCorretaInput = quizForm.querySelector(`input[name="${questao}"][value="${gabarito[questao]}"]`);
                        if (respostaCorretaInput) {
                            respostaCorretaInput.parentElement.classList.add('correct');
                        }
                    }
                }
            }
            
            const resultsDiv = document.getElementById('quiz-results');
            const scoreP = document.getElementById('quiz-score');
            scoreP.innerHTML = `Voc√™ acertou <strong>${acertos}</strong> de ${totalQuestoes} quest√µes!`;
            resultsDiv.style.display = 'block';
        });
    }

    // --- EVENT LISTENERS ---
    backBtn.addEventListener('click', backToBrowse);
    window.addEventListener('scroll', handleHeaderScroll);

    startJourneyBtn.addEventListener('click', () => {
        const firstTopic = topicsData.find(t => t.category === "Conte√∫do da Aula");
        if(firstTopic) {
            showTopicDetails(firstTopic.id);
        }
    });

    episodeMenu.addEventListener('click', (e) => {
        if (e.target && e.target.matches('li')) {
            const topicId = parseInt(e.target.dataset.topicId, 10);
            showTopicDetails(topicId);
            if (window.innerWidth <= 1200) {
                episodeMenu.classList.remove('open');
            }
        }
    });

    menuToggleBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        episodeMenu.classList.toggle('open');
    });
    
    document.body.addEventListener('click', (e) => {
        if (window.innerWidth <= 1200 && episodeMenu.classList.contains('open')) {
            if (!episodeMenu.contains(e.target) && e.target !== menuToggleBtn) {
                episodeMenu.classList.remove('open');
            }
        }
    });

    // --- INICIALIZA√á√ÉO ---
    parseOriginalContent();
    renderCatalog();
});
</script>

</body>
</html>
