<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imuno Explica | Hipersensibilidades e Imunodefici√™ncias</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .perspective-container {
            perspective: 1000px;
        }
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
            text-align: center;
            border-radius: 1rem;
        }
        .flashcard-back {
            transform: rotateY(180deg);
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option.selected {
            transform: translateX(10px);
            background-color: #facc15; /* yellow-400 */
            color: #422006;
        }
        .quiz-option.correct {
            background-color: #22c55e !important; /* green-500 */
            color: white !important;
        }
        .quiz-option.incorrect {
            background-color: #ef4444 !important; /* red-500 */
            color: white !important;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        
        <!-- Cabe√ßalho -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-blue-600 flex items-center justify-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield-check"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></svg>
                Imuno Explica
            </h1>
            <p class="text-slate-500 mt-2 text-lg">Seu guia interativo de Hipersensibilidades e Imunodefici√™ncias.</p>
        </header>

        <!-- Navega√ß√£o -->
        <nav class="flex justify-center bg-white p-2 rounded-xl shadow-md mb-8 sticky top-4 z-10">
            <button data-target="conteudo" class="nav-btn bg-blue-500 text-white flex-1 md:flex-initial md:px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-transform transform hover:scale-105">
                <i data-lucide="book-open"></i> Conte√∫do
            </button>
            <button data-target="flashcards" class="nav-btn bg-transparent text-slate-600 flex-1 md:flex-initial md:px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-transform transform hover:scale-105">
                <i data-lucide="layers"></i> Flashcards
            </button>
            <button data-target="quiz" class="nav-btn bg-transparent text-slate-600 flex-1 md:flex-initial md:px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-transform transform hover:scale-105">
                <i data-lucide="lightbulb"></i> Quiz
            </button>
        </nav>

        <!-- Se√ß√µes de Conte√∫do -->
        <main>
            <!-- SE√á√ÉO 1: CONTE√öDO -->
            <section id="conteudo" class="content-section space-y-4">
                <h2 class="text-3xl font-bold text-blue-600 mb-4 flex items-center gap-2">üî¨ Hipersensibilidades</h2>
                
                <div class="accordion-item bg-white p-4 rounded-xl shadow">
                    <button class="accordion-header w-full text-left text-xl font-semibold flex justify-between items-center">
                        Tipo I: A Rea√ß√£o Al√©rgica ü§ß
                        <i data-lucide="chevron-down" class="transition-transform"></i>
                    </button>
                    <div class="accordion-content hidden mt-3 pt-3 border-t border-slate-200 text-slate-600">
                        <p><strong>Mediador:</strong> Anticorpo IgE.</p>
                        <p><strong>Mecanismo:</strong> Al√©rgenos ativam mast√≥citos e bas√≥filos, que liberam histamina. Ocorre em duas fases: sensibiliza√ß√£o (primeiro contato) e efetora (reexposi√ß√£o).</p>
                        <p><strong>Exemplos Cl√≠nicos:</strong> Rinite al√©rgica, asma, urtic√°ria e a grave anafilaxia.</p>
                    </div>
                </div>

                <div class="accordion-item bg-white p-4 rounded-xl shadow">
                    <button class="accordion-header w-full text-left text-xl font-semibold flex justify-between items-center">
                        Tipo II: Citotoxicidade por Anticorpos üéØ
                        <i data-lucide="chevron-down" class="transition-transform"></i>
                    </button>
                    <div class="accordion-content hidden mt-3 pt-3 border-t border-slate-200 text-slate-600">
                        <p><strong>Mediador:</strong> Anticorpos IgG e IgM contra ant√≠genos de superf√≠cie celular.</p>
                        <p><strong>Mecanismo:</strong> Ativa√ß√£o do complemento (lise celular), opsoniza√ß√£o e fagocitose, ou disfun√ß√£o celular (ex: bloqueio de receptores).</p>
                        <p><strong>Exemplos Cl√≠nicos:</strong> Anemia hemol√≠tica, rea√ß√µes transfusionais, Miastenia Gravis (bloqueio), Doen√ßa de Graves (est√≠mulo).</p>
                    </div>
                </div>

                 <div class="accordion-item bg-white p-4 rounded-xl shadow">
                    <button class="accordion-header w-full text-left text-xl font-semibold flex justify-between items-center">
                        Tipo III: Doen√ßa por Imunocomplexos üîó
                        <i data-lucide="chevron-down" class="transition-transform"></i>
                    </button>
                    <div class="accordion-content hidden mt-3 pt-3 border-t border-slate-200 text-slate-600">
                        <p><strong>Mediador:</strong> Imunocomplexos (ant√≠geno sol√∫vel + IgG/IgM).</p>
                        <p><strong>Mecanismo:</strong> Deposi√ß√£o de imunocomplexos em tecidos (vasos, rins, articula√ß√µes), ativando o complemento e recrutando neutr√≥filos, que causam inflama√ß√£o e dano tecidual.</p>
                        <p><strong>Exemplos Cl√≠nicos:</strong> L√∫pus Eritematoso Sist√™mico (LES), glomerulonefrite p√≥s-estreptoc√≥cica.</p>
                    </div>
                </div>

                <div class="accordion-item bg-white p-4 rounded-xl shadow">
                    <button class="accordion-header w-full text-left text-xl font-semibold flex justify-between items-center">
                        Tipo IV: Rea√ß√£o Tardia por C√©lulas T ‚è±Ô∏è
                        <i data-lucide="chevron-down" class="transition-transform"></i>
                    </button>
                    <div class="accordion-content hidden mt-3 pt-3 border-t border-slate-200 text-slate-600">
                        <p><strong>Mediador:</strong> Linf√≥citos T (n√£o envolve anticorpos).</p>
                        <p><strong>Mecanismo:</strong> C√©lulas T ativadas liberam citocinas que ativam macr√≥fagos (forma√ß√£o de granulomas) ou matam c√©lulas-alvo diretamente. A rea√ß√£o leva 48-72h para se desenvolver.</p>
                        <p><strong>Exemplos Cl√≠nicos:</strong> Teste de tuberculina (PPD), dermatite de contato (n√≠quel), tuberculose.</p>
                    </div>
                </div>

                <h2 class="text-3xl font-bold text-blue-600 mt-8 mb-4 flex items-center gap-2">üõ°Ô∏è Imunodefici√™ncias</h2>

                <div class="accordion-item bg-white p-4 rounded-xl shadow">
                    <button class="accordion-header w-full text-left text-xl font-semibold flex justify-between items-center">
                        Prim√°rias (IDPs) vs. Secund√°rias (IDSs) üß¨
                        <i data-lucide="chevron-down" class="transition-transform"></i>
                    </button>
                    <div class="accordion-content hidden mt-3 pt-3 border-t border-slate-200 text-slate-600">
                        <p><strong>Prim√°rias (IDPs):</strong> Erros inatos da imunidade. S√£o doen√ßas gen√©ticas, raras, que afetam o desenvolvimento ou fun√ß√£o do sistema imune. Ex: Doen√ßa de Bruton, SCID.</p>
                        <p><strong>Secund√°rias (IDSs):</strong> Muito mais comuns. O sistema imune √© comprometido por fatores externos. Ex: Desnutri√ß√£o, quimioterapia, e a mais famosa, a infec√ß√£o pelo HIV.</p>
                    </div>
                </div>

                <div class="accordion-item bg-white p-4 rounded-xl shadow">
                    <button class="accordion-header w-full text-left text-xl font-semibold flex justify-between items-center">
                        SCID: A Imunodefici√™ncia "Bolha" ü´ß
                        <i data-lucide="chevron-down" class="transition-transform"></i>
                    </button>
                    <div class="accordion-content hidden mt-3 pt-3 border-t border-slate-200 text-slate-600">
                        <p><strong>O que √©?</strong> Imunodefici√™ncia Combinada Grave. Um grupo de doen√ßas gen√©ticas com defeito profundo nos linf√≥citos T. √â uma emerg√™ncia pedi√°trica.</p>
                        <p><strong>Diagn√≥stico:</strong> A suspeita vem com infec√ß√µes oportunistas graves em beb√™s. O "Teste do Pezinho" pode triar para SCID medindo os TRECs.</p>
                        <p><strong>Tratamento:</strong> A cura √© o Transplante de C√©lulas-Tronco Hematopoi√©ticas (TCTH) ou Terapia G√™nica.</p>
                    </div>
                </div>

                <div class="accordion-item bg-white p-4 rounded-xl shadow">
                    <button class="accordion-header w-full text-left text-xl font-semibold flex justify-between items-center">
                        HIV/AIDS: A Mais Famosa das IDSs ü¶†
                        <i data-lucide="chevron-down" class="transition-transform"></i>
                    </button>
                    <div class="accordion-content hidden mt-3 pt-3 border-t border-slate-200 text-slate-600">
                        <p><strong>Alvo do V√≠rus:</strong> O HIV ataca e destr√≥i os linf√≥citos T CD4+, os "maestros" da orquestra imune.</p>
                        <p><strong>Fases da Doen√ßa:</strong> Aguda (parece uma gripe forte) -> Cr√¥nica (assintom√°tica por anos) -> AIDS (CD4+ < 200 c√©lulas/mm¬≥ ou doen√ßa oportunista).</p>
                        <p><strong>Tratamento no SUS:</strong> A Terapia Antirretroviral (TARV) √© universal e gratuita. Ela suprime o v√≠rus a n√≠veis indetect√°veis, o que significa que a pessoa n√£o transmite o v√≠rus sexualmente (Indetect√°vel = Intransmiss√≠vel).</p>
                    </div>
                </div>

            </section>

            <!-- SE√á√ÉO 2: FLASHCARDS -->
            <section id="flashcards" class="content-section hidden">
                <div class="perspective-container">
                    <div id="flashcard-container" class="flashcard w-full h-64 md:h-80 mx-auto max-w-lg cursor-pointer">
                        <div class="flashcard-inner">
                            <div class="flashcard-front bg-blue-500 text-white shadow-xl flex-col">
                                <!-- Conte√∫do din√¢mico -->
                            </div>
                            <div class="flashcard-back bg-yellow-400 text-yellow-900 shadow-xl">
                                <!-- Conte√∫do din√¢mico -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-center items-center gap-4 mt-6">
                    <button id="prev-flashcard" class="bg-white p-3 rounded-full shadow-md hover:bg-slate-100 transition">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <span id="flashcard-counter" class="font-semibold text-slate-600">1 / 10</span>
                    <button id="next-flashcard" class="bg-white p-3 rounded-full shadow-md hover:bg-slate-100 transition">
                        <i data-lucide="arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- SE√á√ÉO 3: QUIZ -->
            <section id="quiz" class="content-section hidden">
                <div class="bg-white p-6 rounded-xl shadow-lg max-w-2xl mx-auto">
                    <div id="quiz-start-screen">
                        <h2 class="text-2xl font-bold text-center text-blue-600">Teste seus conhecimentos! üß†</h2>
                        <p class="text-center text-slate-500 mt-2 mb-6">S√£o 20 perguntas para ver se voc√™ est√° craque em Imuno.</p>
                        <button id="start-quiz-btn" class="w-full bg-green-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition-all text-lg">Come√ßar o Quiz!</button>
                    </div>

                    <div id="quiz-game-screen" class="hidden">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-blue-600">Quest√£o <span id="question-number">1</span> de 20</h3>
                            <div id="quiz-score" class="font-bold text-green-600 text-lg">Pontos: 0</div>
                        </div>
                        <div class="w-full bg-slate-200 rounded-full h-2.5 mb-4">
                            <div id="progress-bar" class="bg-yellow-400 h-2.5 rounded-full" style="width: 5%"></div>
                        </div>
                        <p id="question-text" class="text-lg font-semibold mb-6">Qual o principal mediador da hipersensibilidade tipo I?</p>
                        <div id="options-container" class="space-y-3">
                            <!-- Op√ß√µes geradas dinamicamente -->
                        </div>
                        <button id="next-question-btn" class="mt-8 w-full bg-blue-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-600 transition-all text-lg hidden">Pr√≥xima Pergunta</button>
                    </div>
                    
                    <div id="quiz-end-screen" class="hidden text-center">
                        <h2 class="text-2xl font-bold text-blue-600">Quiz Finalizado! üéâ</h2>
                        <p class="text-lg mt-4">Sua pontua√ß√£o final foi:</p>
                        <div id="final-score" class="text-6xl font-bold text-green-500 my-4">18/20</div>
                        <p id="final-message" class="text-slate-600 mb-6">Parab√©ns! Voc√™ √© um mestre da Imunologia!</p>
                        <button id="restart-quiz-btn" class="w-full bg-yellow-400 text-yellow-900 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-all text-lg">Tentar Novamente</button>
                    </div>
                </div>
            </section>

        </main>
        
        <!-- Rodap√© -->
        <footer class="text-center mt-12 pt-8 border-t border-slate-200">
            <a href="apostilaimuno1.pdf" target="_blank" class="inline-flex items-center gap-2 bg-blue-100 text-blue-700 font-semibold px-6 py-3 rounded-lg hover:bg-blue-200 transition">
                <i data-lucide="download"></i>
                Baixar Material Completo (PDF)
            </a>
            <p class="text-slate-400 mt-4 text-sm">Desenvolvido para estudantes de Medicina. ü©∫</p>
        </footer>

    </div>

    <script>
        lucide.createIcons();

        // --- DADOS ---
        const flashcardData = [
            { front: "Hipersensibilidade Tipo I", back: "Rea√ß√£o al√©rgica imediata, mediada por IgE. Ex: Rinite, asma, anafilaxia." },
            { front: "Hipersensibilidade Tipo II", back: "Citot√≥xica, mediada por IgG/IgM contra c√©lulas. Ex: Anemia hemol√≠tica." },
            { front: "Hipersensibilidade Tipo III", back: "Doen√ßa por imunocomplexos (ant√≠geno + anticorpo). Ex: L√∫pus (LES)." },
            { front: "Hipersensibilidade Tipo IV", back: "Rea√ß√£o tardia, mediada por c√©lulas T. Ex: Dermatite de contato, teste PPD." },
            { front: "IgE", back: "Imunoglobulina chave nas rea√ß√µes al√©rgicas (Tipo I). Liga-se a mast√≥citos e bas√≥filos." },
            { front: "Histamina", back: "Principal mediador liberado por mast√≥citos na alergia. Causa vasodilata√ß√£o, prurido e broncoconstri√ß√£o." },
            { front: "Teste de Coombs", back: "Usado para diagnosticar doen√ßas da Hipersensibilidade Tipo II, como a anemia hemol√≠tica." },
            { front: "IDPs vs. IDSs", back: "Prim√°rias (gen√©ticas, raras) vs. Secund√°rias (adquiridas, comuns, como HIV)." },
            { front: "SCID", back: "Imunodefici√™ncia Combinada Grave. Defeito nos linf√≥citos T. √â uma emerg√™ncia pedi√°trica." },
            { front: "HIV", back: "V√≠rus que ataca os linf√≥citos T CD4+, causando uma imunodefici√™ncia secund√°ria progressiva (AIDS)." }
        ];

        const quizData = [
            { question: "Qual imunoglobulina √© a principal mediadora da hipersensibilidade tipo I?", options: ["IgG", "IgM", "IgE", "IgA"], answer: "IgE" },
            { question: "A anafilaxia √© a manifesta√ß√£o mais grave de qual tipo de hipersensibilidade?", options: ["Tipo I", "Tipo II", "Tipo III", "Tipo IV"], answer: "Tipo I" },
            { question: "Rea√ß√µes transfusionais hemol√≠ticas s√£o um exemplo cl√°ssico de qual hipersensibilidade?", options: ["Tipo I", "Tipo II", "Tipo III", "Tipo IV"], answer: "Tipo II" },
            { question: "Na Miastenia Gravis, os anticorpos agem de que forma nos receptores de acetilcolina?", options: ["Estimulando (agonista)", "Bloqueando (antagonista)", "Destruindo a c√©lula", "Ativando o complemento"], answer: "Bloqueando (antagonista)" },
            { question: "O L√∫pus Eritematoso Sist√™mico (LES) √© o prot√≥tipo da hipersensibilidade de que tipo?", options: ["Tipo I", "Tipo II", "Tipo III", "Tipo IV"], answer: "Tipo III" },
            { question: "Qual √© o mecanismo central de les√£o na hipersensibilidade tipo III?", options: ["Libera√ß√£o de histamina por mast√≥citos", "Lise celular direta por anticorpos", "Deposi√ß√£o de imunocomplexos e inflama√ß√£o neutrof√≠lica", "Ativa√ß√£o de macr√≥fagos por c√©lulas T"], answer: "Deposi√ß√£o de imunocomplexos e inflama√ß√£o neutrof√≠lica" },
            { question: "A dermatite de contato al√©rgica ao n√≠quel √© mediada por qual componente do sistema imune?", options: ["Anticorpos IgE", "Anticorpos IgG", "Imunocomplexos", "Linf√≥citos T"], answer: "Linf√≥citos T" },
            { question: "O teste de tuberculina (PPD) leva de 48 a 72 horas para se manifestar. Isso o caracteriza como uma rea√ß√£o de qual tipo?", options: ["Tipo I", "Tipo II", "Tipo III", "Tipo IV"], answer: "Tipo IV" },
            { question: "Qual das seguintes condi√ß√µes √© uma Imunodefici√™ncia Prim√°ria (IDP)?", options: ["AIDS", "Desnutri√ß√£o", "Imunodefici√™ncia Combinada Grave (SCID)", "P√≥s-quimioterapia"], answer: "Imunodefici√™ncia Combinada Grave (SCID)" },
            { question: "A Agamaglobulinemia de Bruton √© causada por um defeito gen√©tico que impede a matura√ß√£o de qual c√©lula?", options: ["Linf√≥citos T", "Linf√≥citos B", "Neutr√≥filos", "C√©lulas NK"], answer: "Linf√≥citos B" },
            { question: "Qual √© o principal alvo celular do v√≠rus HIV?", options: ["Linf√≥citos T CD8+", "Linf√≥citos B", "Linf√≥citos T CD4+", "Macr√≥fagos"], answer: "Linf√≥citos T CD4+" },
            { question: "A fase final da infec√ß√£o pelo HIV, com contagem de CD4+ < 200 c√©lulas/mm¬≥, √© chamada de:", options: ["Fase Aguda", "Lat√™ncia Cl√≠nica", "S√≠ndrome Retroviral", "AIDS"], answer: "AIDS" },
            { question: "O conceito 'Indetect√°vel = Intransmiss√≠vel' (I=I) se refere √† incapacidade de transmitir o HIV por qual via?", options: ["Transfus√£o de sangue", "Compartilhamento de seringas", "Via sexual", "Todas as vias"], answer: "Via sexual" },
            { question: "O tratamento curativo de escolha para a maioria dos casos de SCID √©:", options: ["Reposi√ß√£o de imunoglobulina", "Terapia Antirretroviral (TARV)", "Transplante de C√©lulas-Tronco Hematopoi√©ticas (TCTH)", "Uso de anti-histam√≠nicos"], answer: "Transplante de C√©lulas-Tronco Hematopoi√©ticas (TCTH)" },
            { question: "Qual c√©lula libera histamina durante uma rea√ß√£o al√©rgica?", options: ["Linf√≥cito T", "Macr√≥fago", "Neutr√≥filo", "Mast√≥cito"], answer: "Mast√≥cito" },
            { question: "A forma√ß√£o de granulomas na tuberculose √© um exemplo de qual mecanismo de hipersensibilidade?", options: ["Tipo I", "Tipo II", "Tipo III", "Tipo IVa (Th1)"], answer: "Tipo IVa (Th1)" },
            { question: "A 'doen√ßa do soro' √© causada por:", options: ["Alergia a alimentos", "Rea√ß√£o a vacinas de v√≠rus vivos", "Deposi√ß√£o de imunocomplexos ap√≥s exposi√ß√£o a prote√≠nas estranhas", "Infec√ß√£o por bact√©rias encapsuladas"], answer: "Deposi√ß√£o de imunocomplexos ap√≥s exposi√ß√£o a prote√≠nas estranhas" },
            { question: "Qual √© a causa mais comum de imunodefici√™ncia secund√°ria no mundo?", options: ["HIV/AIDS", "Desnutri√ß√£o", "C√¢ncer", "Uso de corticosteroides"], answer: "Desnutri√ß√£o" },
            { question: "O teste do pezinho pode rastrear SCID atrav√©s da medi√ß√£o de:", options: ["N√≠veis de IgG", "Contagem de linf√≥citos T", "TRECs (C√≠rculos de Excis√£o do Receptor de C√©lula T)", "Anticorpos anti-HIV"], answer: "TRECs (C√≠rculos de Excis√£o do Receptor de C√©lula T)" },
            { question: "No tratamento da anafilaxia, qual √© o medicamento de primeira linha e que salva vidas?", options: ["Anti-histam√≠nico", "Corticosteroide", "Adrenalina (Epinefrina)", "Broncodilatador"], answer: "Adrenalina (Epinefrina)" }
        ];

        // --- L√ìGICA GERAL ---
        document.addEventListener('DOMContentLoaded', () => {
            
            // Navega√ß√£o entre se√ß√µes
            const navBtns = document.querySelectorAll('.nav-btn');
            const contentSections = document.querySelectorAll('.content-section');
            navBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Estilos dos bot√µes
                    navBtns.forEach(b => {
                        b.classList.remove('bg-blue-500', 'text-white');
                        b.classList.add('bg-transparent', 'text-slate-600');
                    });
                    btn.classList.add('bg-blue-500', 'text-white');
                    btn.classList.remove('bg-transparent', 'text-slate-600');
                    
                    // Mostrar/esconder se√ß√µes
                    const targetId = btn.getAttribute('data-target');
                    contentSections.forEach(section => {
                        if (section.id === targetId) {
                            section.classList.remove('hidden');
                        } else {
                            section.classList.add('hidden');
                        }
                    });
                });
            });

            // L√≥gica do Accordion
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('i');
                    content.classList.toggle('hidden');
                    icon.classList.toggle('rotate-180');
                });
            });
            
            // --- L√ìGICA DOS FLASHCARDS ---
            const flashcardContainer = document.getElementById('flashcard-container');
            const flashcardFront = flashcardContainer.querySelector('.flashcard-front');
            const flashcardBack = flashcardContainer.querySelector('.flashcard-back');
            const prevFlashcardBtn = document.getElementById('prev-flashcard');
            const nextFlashcardBtn = document.getElementById('next-flashcard');
            const flashcardCounter = document.getElementById('flashcard-counter');
            let currentFlashcardIndex = 0;

            function updateFlashcard() {
                const card = flashcardData[currentFlashcardIndex];
                flashcardFront.innerHTML = `<h3 class="text-2xl md:text-3xl font-bold">${card.front}</h3>`;
                flashcardBack.innerHTML = `<p class="text-lg md:text-xl">${card.back}</p>`;
                flashcardCounter.textContent = `${currentFlashcardIndex + 1} / ${flashcardData.length}`;
                flashcardContainer.classList.remove('flipped');
            }

            flashcardContainer.addEventListener('click', () => {
                flashcardContainer.classList.toggle('flipped');
            });

            nextFlashcardBtn.addEventListener('click', () => {
                currentFlashcardIndex = (currentFlashcardIndex + 1) % flashcardData.length;
                updateFlashcard();
            });

            prevFlashcardBtn.addEventListener('click', () => {
                currentFlashcardIndex = (currentFlashcardIndex - 1 + flashcardData.length) % flashcardData.length;
                updateFlashcard();
            });

            // Inicializa o primeiro flashcard
            updateFlashcard();
            
            // --- L√ìGICA DO QUIZ ---
            const startScreen = document.getElementById('quiz-start-screen');
            const gameScreen = document.getElementById('quiz-game-screen');
            const endScreen = document.getElementById('quiz-end-screen');
            
            const startBtn = document.getElementById('start-quiz-btn');
            const restartBtn = document.getElementById('restart-quiz-btn');
            const nextQuestionBtn = document.getElementById('next-question-btn');
            
            const questionNumberEl = document.getElementById('question-number');
            const questionTextEl = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const scoreEl = document.getElementById('quiz-score');
            const progressBar = document.getElementById('progress-bar');

            const finalScoreEl = document.getElementById('final-score');
            const finalMessageEl = document.getElementById('final-message');

            let currentQuestionIndex = 0;
            let score = 0;
            let answerSelected = false;

            function startQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                startScreen.classList.add('hidden');
                endScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                nextQuestionBtn.classList.add('hidden');
                showQuestion();
            }

            function showQuestion() {
                answerSelected = false;
                const question = quizData[currentQuestionIndex];
                questionNumberEl.textContent = currentQuestionIndex + 1;
                questionTextEl.textContent = question.question;
                scoreEl.textContent = `Pontos: ${score}`;
                progressBar.style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;
                
                optionsContainer.innerHTML = '';
                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.classList.add('quiz-option', 'w-full', 'p-4', 'bg-slate-100', 'rounded-lg', 'text-left', 'font-medium', 'hover:bg-yellow-200');
                    button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                    button.addEventListener('click', () => selectAnswer(button, option, question.answer));
                    optionsContainer.appendChild(button);
                });
                nextQuestionBtn.classList.add('hidden');
            }

            function selectAnswer(button, selectedOption, correctAnswer) {
                if (answerSelected) return;
                answerSelected = true;

                const allOptions = optionsContainer.querySelectorAll('.quiz-option');

                if (selectedOption === correctAnswer) {
                    score++;
                    button.classList.add('correct');
                } else {
                    button.classList.add('incorrect');
                    allOptions.forEach(opt => {
                        if (opt.textContent.includes(correctAnswer)) {
                            opt.classList.add('correct');
                        }
                    });
                }
                scoreEl.textContent = `Pontos: ${score}`;
                nextQuestionBtn.classList.remove('hidden');
            }
            
            function showEndScreen() {
                 gameScreen.classList.add('hidden');
                 endScreen.classList.remove('hidden');
                 finalScoreEl.textContent = `${score}/${quizData.length}`;
                 
                 let message = "";
                 const percentage = (score / quizData.length) * 100;
                 if (percentage === 100) {
                     message = "Incr√≠vel! Voc√™ gabaritou! üöÄ Voc√™ √© uma refer√™ncia em Imunologia!";
                 } else if (percentage >= 80) {
                     message = "Excelente! Voc√™ domina o assunto. Parab√©ns! ü©∫";
                 } else if (percentage >= 50) {
                     message = "Bom trabalho! Continue revisando os conceitos para fixar ainda mais. üëç";
                 } else {
                     message = "N√£o desanime! Use os flashcards e o conte√∫do para revisar e tente novamente. üí™";
                 }
                 finalMessageEl.textContent = message;
            }

            nextQuestionBtn.addEventListener('click', () => {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizData.length) {
                    showQuestion();
                } else {
                    showEndScreen();
                }
            });
            
            startBtn.addEventListener('click', startQuiz);
            restartBtn.addEventListener('click', startQuiz);
        });
    </script>
</body>
</html>
